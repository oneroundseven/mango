/* Pub Time: August 21, 2013 04:38:40 */(function(l){function p(a,c,d){"undefined"==typeof d&&(d=!0);for(var b in c)if("Object"===Object.prototype.toString.call(c[b]))arguments.callee(a,c[b]);else if(!a[b]||d)a[b]=c[b];return a}function q(a){a.innerHTML=""}function s(a){a.innerHTML=""===this.elems.carrier.value?this._.placeholder:""}function g(a,c){return a.currentStyle?a.currentStyle[c]:l.getComputedStyle(a,null)[c]}var m=new Abstract({setValue:function(){},initPage:function(){},onchange:function(){}}),f=null,e=null,r="",i=new Clazz(m,
{config:{carrier:null,control:{unifieddisplay:!1,emMethod:"focus"},style:{color:"#BBB",fontFamily:""}},inherit:Component},function(a){this.setConfig(a);this._.support="placeholder"in document.createElement("input");this._.placeholder=null;this.setValue.implement(this._setValue);this.onchange.implement(this._onchange);return this.initialize()});i.initPage=function(a){var c=[],d,b,e;if(document.querySelectorAll){d=document.querySelectorAll("input[placeholder]");b=0;for(e=d.length;b<e;b++)c.push(d[b]);
d=document.querySelectorAll("textarea[placeholder]");b=0;for(e=d.length;b<e;b++)c.push(d[b])}else{d=document.getElementsByTagName("input");b=0;for(e=d.length;b<e;b++)d[b].placeholder&&c.push(d[b]);d=document.getElementsByTagName("textarea");b=0;for(e=d.length;b<e;b++)d[b].placeholder&&c.push(d[b])}if(c.length)return new i(p({carrier:c},a,!1))};i.extend({initialize:function(){var a=this.config;if(!a.carrier)throw Error("Placeholder not support with carrier null!");"input"===a.control.emMethod&&(a.control.unifieddisplay=
!0);if("[object Array]"==Object.prototype.toString.call(a.carrier)){var c=[],d,b,j;d=0;for(b=a.carrier.length;d<b;d++)(j=a.carrier[d])&&1===j.nodeType&&c.push(new i(p({carrier:j},a,!1)));return c}this.elems.carrier=e=a.carrier;if(!e.getAttribute("placeholder"))throw Error("Element not has placeholder!");e.getAttribute("id")||e.setAttribute("id","p_"+(new Date).getTime());this._.placeholder=r=e.getAttribute("placeholder");a.control.unifieddisplay&&(this._.support=!1,e.setAttribute("placeholder",""));
if(!this._.support){var a=this.elems,c=e,n,o,k,h;f=document.createElement("label");f.htmlFor=e.id;d=g(c,"padding");b=g(c,"margin");j=g(c,"fontSize");h=g(c,"paddingLeft");n=g(c,"borderTopWidth");o=g(c,"borderLeftWidth");k=g(c,"marginTop");b||(b=getComputedStyle(c,null).marginTop+" 0");0!==parseInt(n)&&(k=parseInt("auto"===k?0:k)+parseInt(n)+"px");0!==parseInt(o)&&(h="auto"===h?0:h,h=parseInt(o)+parseInt(h)+"px");f.style.cssText="position:absolute; color:"+this.config.style.color+"; cursor:text; padding:"+
d+"; padding-left:"+h+"; margin:"+b+"; margin-top:"+k+"; font-size:"+j+"; font-family:"+this.config.style.fontFamily;a.label=f;""===e.value&&(f.innerHTML=r);e.parentNode.insertBefore(f,e);var l=this,m=f;e.onblur=function(){s.call(l,m)};if("input"===this.config.control.emMethod){var t=f;e.onkeydown=function(){q.call(e,t)}}else{var u=f;e.onfocus=function(){q.call(e,u)}}}},_setValue:function(a){var c=a!=this._.placeholder;this._.placeholder=a;this.config.control.unifieddisplay||this.elems.carrier.setAttribute("placeholder",
a);!this._.support&&""===this.elems.carrier.value&&(this.elems.label.innerHTML=a);c&&this.fire("change")},_onchange:function(a){if(a)this.on("change",a)}});l.Placeholder=i})(window);
