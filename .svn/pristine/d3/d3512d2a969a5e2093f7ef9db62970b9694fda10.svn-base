/**
* upload
* @version 0.6.8
* @namespace FOCUS.widget
* @author lvxiang
*/
window.FOCUS=window.FOCUS||{};
void function(h,k,p){this.UUID=(new Date).valueOf().toString(16).toUpperCase();this.namespace=function(){for(var d=[].slice.call(arguments),l,a,c,b=[];d.length;){l=d.shift().split(/\./);for(c=h;l.length;)a=l.shift(),c[a]||(c[a]={}),c=c[a];b.push(c)}return 1<b.length?b:b[0]};this.BASEPATH=h.FOCUS_BASEPATH||function(d){for(var l=h.location,a=/^(\w+\:\/{2,3}.+?)\//.exec(l.href)[1],c=/(.*?\/)(?:[^\/]*?(?:base|upload|transmitter)[^\/]*?)\.js(?:[?#].*)?$/i,b=/^\w+\:\/\//,f=/^\//,g=/^.*\//,e,m,n=0,s=d.length;n<
s;n++)if(m=d[n].src,b.test(m)||(m=f.test(m)?a+m:g.exec(l.href)[0]+m),m=c.exec(m)){e=m[1];break}e?(e=e.replace(RegExp(l.protocol+"\\/\\/"+l.host,"i"),""),e=l.protocol+"//"+l.host+e):e=g.exec(l.href)[0];return e}(k.getElementsByTagName("script"))}.call(FOCUS,this,this.document);void function(){var h=this.BASEPATH;this.PATH_CHARSET=h+"swf/transform4Charset.swf";this.PATH_FLASH=h+"swf/swfupload.swf";this.PATH_FLASH_FP9=h+"swf/swfupload_fp9.swf"}.call(FOCUS);
void function(h,k,p){var d=this.namespace("FOCUS.util");d.type=function(a){var b,f=/\{\s*\[native\s*code\]\s*\}/i;null===a?b="null":"undefined"===typeof a?b="undefined":(b=Object.prototype.toString.call(a).match(/\w+/g)[1].toLowerCase(),"object"===b&&f.test(a+"")&&(b="function"));return b};d.trim=function(a){return(a+"").replace(/^[\s\u00A0]+|[\s\u00A0]+$/g,"")};d.JSON=function(a){var b={};b.stringify=a?a.stringify:function(){return""};b.parse=function(b){var a;if("string"===d.type(b))try{a=(new Function("return "+
b))()}catch(e){a={}}else a=b;return a};return b}.call(this,h.JSON);d.browser=function(a){var b=/chrome\/(\d+\.\d+)/,f=/safari\/(\d+\.\d+)/,g=/version\/(\d+\.\d+)/,e={},m;if(m=/msie\s*(\d+\.\d+)/.exec(a))return e.msie=!0,e.version=m[1],e;if(m=/firefox\/(\d+\.\d+)/.exec(a))return e.mozilla=e.firefox=!0,e.version=m[1],e;if(m=/webkit\/(\d+\.\d+)/.exec(a)){e.webkit=!0;e.version=m[1];if(h.chrome)return e.chrome=!0,e.version=b.exec(a)[1],e;if(m=f.exec(a))e.safari=!0,e.version=[1];return e}if((m=/opera/.exec(a))&&
h.opera)e.opera=!0,e.version=g.exec(a)[1];return e}.call(this,h.navigator.userAgent.toLowerCase());d.flash=function(a,b){var f={has:!1,version:0};if(b.length&&b["Shockwave Flash"])b["Shockwave Flash"].description&&!("undefined"!==typeof a.mimeTypes&&a.mimeTypes["application/x-shockwave-flash"]&&!a.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(f={has:!0,version:/\d+\.\d+/.exec(b["Shockwave Flash"].description)[0]});else if(h.ActiveXObject){var g,e=/\d+/g;try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(m){}g&&
(e.exec(""),f={has:!0,version:g.GetVariable("$version").match(e).join(".")})}return f}.call(this,h.navigator,h.navigator.plugins);d.extend=function(){var a=arguments.callee,b,f;"object"!==d.type(arguments[0])?(b=1,f=!!arguments[0]):(b=0,f=!1);var g=arguments[b]||{};b=[].slice.call(arguments,b+1);for(var e,m;b.length;)if(e=b.shift(),"object"===d.type(e)){var n,s;for(s in e)if(n=e[s],"object"===d.type(n))if(n==h||n==k||"childNodes"in n&&"nextSibling"in n&&"nodeType"in n){if(f||!(s in g))g[g]=n}else{m=
d.type(g[s]);if(!(s in g)||"undefined"===m||"null"===m)g[s]={};"object"===d.type(g[s])&&a(f,g[s],n)}else if(f||!(s in g))g[s]=n}return g};d.console=function(a){var b=!1,f=function(){},g={ON:!0,OFF:!1},f={SWITCH:g,turn:function(a){b=g[a?"ON":"OFF"]},log:f,info:f,warn:f,error:f,debug:f};if(!a)return f;a.debug||(a.debug=a.log);a.error||(a.error=a.warn);return d.extend(!0,f,{log:function(e){b===g.ON&&a.log(e)},info:function(e){b===g.ON&&a.info(e)},warn:function(e){b===g.ON&&a.warn(e)},error:function(e){b===
g.ON&&a.error(e)},debug:function(e){b===g.ON&&a.debug(e)}})}.call(h,h.console);d.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var f=-1,g=0,e=a.length;g<e;g++)if(a[g]===b){f=g;break}return f};d.unique=function(a){for(var b=[],f=0,g=a.length;f<g;f++)-1===d.indexOf(b,a[f])&&b.push(a[f]);return b};d.random=function(){var a={};return function(b,f,g){b=b||0;f="number"===d.type(f)&&!isNaN(f)?f===b?f+10:f:b+10;var e=b+"_"+f;a[e]||(a[e]=[]);a[e].length===f-b&&(a[e]=[],"function"===d.type(g)&&
g.call(this));for(var m;;)if(m=b+~~(Math.random()*(f-b)),-1===d.indexOf(a[e],m)){a[e].push(m);break}return m}}.call(this);d.createElement=function(){return function(a){var b={};d.extend(!0,b,a);a="textarea"===b.el.toLowerCase();var f,g=d.extend(!0,{},b),e=["<",g.el],m=g.el;delete g.el;for(f in g)e.push(" ",f,'="',g[f],'"');e.push(-1===",meta,base,link,img,input,br,hr,area,sharp,".indexOf(","+m+",")?"></"+m+">":" />");f=e.join("");var n,g=!1;try{n=k.createElement(f)}catch(s){g=!0,n=k.createElement(b.el),
delete b.el}if(g)for(var h in b)n[h]=b[h];a&&(n.value=b.value);"input"===n.tagName.toLowerCase()&&(n.type=b.type?b.type:"text");return n}}.call(this);d.event=function(){var a=function(a){return a?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)}}.call(this,!!h.addEventListener);(function(a){return a?function(a,b,c){a.removeEventListener(b,c)}:function(a,b,c){a.detachEvent("on"+b,c)}}).call(this,!!h.removeEventListener);var b="FOCUS_EVENTS_"+(new Date).valueOf(),
f=function(a,b){for(var c=0,f=b.length;c<f;c++)b[c].handler.apply(this,[a].concat(b[c].params))};return{bind:function(g,e,d){g[b]||(g[b]={});var n=g[b];n[e]||(n[e]=[],a(g,e,function(a){a=a||h.event;f.call(g,a,n[e])}));n[e].push({handler:d,params:[].slice.call(arguments,3)})},remove:function(a,e,c){if(a[b]&&!(a[b]&&!a[b][e]||a[b]&&!a[b][e].length))if(a=a[b][e],c){e=-1;for(var f=0,d=a.length;f<d;f++)if(a[f].handler===c){e=f;break}c=e;-1!=c&&a.splice(c,1)}}}}.call(this);d.feature_upload=function(a){var b=
function(){var b=d.flash,f=b.has;if(b&&b.has&&a.oscpu&&d.browser.firefox&&4<=d.browser.version&&13>=d.browser.version){var g=/windows\s*nt\s*([\d\.]+)/i.exec(a.oscpu);if(g&&(/^6\.0/.test(g[1])||/^6\.1/.test(g[1]))&&/^11\.3/.test(b.version))f=!1}return f}.call(this),f=function(){if(d.browser.firefox&&3.6>d.browser.version)return!1;var a={},b=k.createElement("input");b.type="file";b.style.cssText="position:absolute; top:-999px; height:-999px;";k.body.appendChild(b);a.file=!!b.files;a.multiple="multiple"in
b&&!(d.browser.apple&&6>d.browser.version);k.body.removeChild(b);delete b;if(!h.XMLHttpRequest)return!1;b=new XMLHttpRequest;a.upload=!!b.upload;a.sendAsBinary=!!b.sendAsBinary;a.FormData=!!h.FormData&&!h.FormData.customized;delete b;return a}.call(this),g=function(){var a={};a.sameDomain=k.domain===(h.location.host||h.location.hostname);return a}.call(this);return{html5:f,flash:b,iframe:g}}.call(this,h.navigator);d.sizeConvert=function(){var a={KB:1024,MB:1048576,GB:1073741824},b=function(a,b){this.size=
a;this.unit=b};b.prototype={toString:function(){return this.size+" "+this.unit},valueOf:function(){return this.size}};var f=/^((?:\d+)(?:\.\d+)?)\s*([A-Za-z]*)$/g,g=/([A-Za-z]+)$/;return{unit2Bytes:function(b){var d=0;g.test(b)?(f.exec(""),(b=f.exec(b))&&(d=(parseFloat(b[1])||0)*(b[2]?a[b[2].toUpperCase()]:1024))):d=parseInt(b)||0;return d||0},bytes2Unit:function(e,f){var g=0,d=["GB","MB","KB"];f=f||"";if(!f)for(var h=0;h<d.length;h++)if(e>a[d[h]]){f=d[h];break}f&&(g=e/a[f]);return g=new b(g||0,f)}}}.call(this);
!h.FormData&&d.feature_upload.html5.sendAsBinary&&(h.FormData=function(a){this.charset=a||"UTF-8";this.reset()},h.FormData.prototype={append:function(a,b){var f="",g=this.EOL,e="--"+this.boundary,m=d.type(b);"object"===m&&(b=JSON.stringify(b),m="string");f=f+(e+g)+"Content-Disposition: form-data; ";"file"===m?(f+='name="'+this.encode(a)+'"; ',f+='filename="'+this.encode(b.filename||b.name)+'"'+g,f+="Content-Type: "+(b.type?b.type:"application/octet-stream")+g+g,f+=b.getAsBinary()+g):(f+='name="'+
this.encode(a)+'"'+g+g,f+=this.encode(b)+g);this.data+=f},getData:function(){return this.data+"--"+this.boundary+"--"+this.EOL},valueOf:function(){return this.getData()},toString:function(){return this.getData()},reset:function(){this.data="";this.boundary="---------------------------71"+(new Date).valueOf().toString(16).replace(/^0x/,"");this.EOL="\r\n"},encode:function(a){return d.transformCharset?d.transformCharset(a,this.charset):encodeURI(a)}},h.FormData.customized=!0);var l={"*/*":"*.*","image/*":"*.jpg; *.jpeg; *.jpe; *.png; *.gif",
"image/png":"*.png","image/jpeg":"*.jpg; *.jpeg; *.jpe","image/jpg":"*.jpg; *.jpeg; *.jpe","image/gif":"*.gif","image/bmp":"*.bmp","application/gzip":"*.gz","application/zip":"*.zip","application/vnd.ms-excel":"*.xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"*.xlsx","application/msword":"*.doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"*.docx","application/vnd.ms-powerpoint":"*.ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"*.pptx",
"application/mshelp":"*.hlp; *.chm","application/pdf":"*.pdf","application/mp3":"*.mp3","text/html":"*.html; *.htm; *.xhtml","text/javascript":"*.js","text/css":"*.css","text/plain":"*.txt","default":"*.*"},a=function(a){var b=["image/*","image/jpg","default"],f={},g;for(g in a)-1===d.indexOf(b,g)&&a[g].replace(/[^\;\u0020]+/g,function(a){f[a]=g});return f}(l);d.convert2MimeTypes=function(c){c=c.split(/[\;\,]\s*/);var b=[],f="";if(c.length){for(var g=/^[^\/]+\/[^\/]+$/,e=0;e<c.length;e++)if(g.test(c[e]))b.push(c[e]);
else if(c[e]in a&&"*.*"!==c[e])b.push(a[c[e]]);else{f="*/*";break}f||(f=d.unique(b).join(", "))}else f="*/*";return f};d.convertMimeTypes=function(a){a=a.split(/[\;\,]\s*/);var b=[],f="";if(a.length){for(var g=/^[^\\\/]+\.[^\\\/]+$/,e=0;e<a.length;e++)if(g.test(a[e]))b.push(a[e]);else if(a[e]in l&&"*/*"!==a[e])b.push(l[a[e]]);else{f="*.*";break}f||(f=d.unique(b).join("; "))}else f="*.*";return f};d.mimeValidation=function(a,b){if(-1!==(a+"").indexOf("*/*"))return!0;b+="";"string"===d.type(a)&&(a=
a.split(/[\;\,\s]+/));var f=!1,g=/^([^\/]+)\/([^\/]+)$/,e=g.exec(b),m;if(!e)return!1;for(var n=0;n<a.length;n++)if(m=g.exec(a[n]),a[n]===b||m[1]===e[1]&&("*"===m[2]||m[2]===e[2])){f=!0;break}return f};d.addClass=function(a,b){var f=d.trim(a.className).split(/\s+/);f.push(b);a.className=d.unique(f).join(" ")};d.removeClass=function(a,b){var f=d.unique(d.trim(a.className).split(/\s+/)),g=d.indexOf(f,b);-1!==g&&f.splice(g,1);a.className=f.join(" ")}}.call(FOCUS,this,this.document);
void function(h,k,p){this.namespace("FOCUS.widget");var d=this.util,l=this.widget,a=function(){},c=function(){var a=d.feature_upload;return{flash:a.flash,html5:a.html5&&a.html5.upload&&(a.html5.sendAsBinary||a.html5.FormData),iframe:!0}}.call(this),b=l.Upload=function(c){this.cfg={priority:b.PRIORITY.DEFAULT,events:{ready:a,loadFailed:a,dialogStart:a,dialogComplete:a,queued:a,queueError:a,uploadStart:a,uploadProgress:a,uploadSuccess:a,uploadError:a,uploadComplete:a},button:{text:"Upload"},multiple:!0,
sizeLimit:-1,uploadLimit:-1,queueLimit:-1,fileTypes:b.MIME_TYPE.ALL,uploadURL:"",filePostName:"",placeholder:"#uploader",debug:!1,plugins:"UploadEvents,AutoDisabled,Ready,Patch4Charset",fileTypesDescription:"All Files"};this.set(c);b.plugins.UploadEvents&&(this.uploadEvents=new b.plugins.UploadEvents(this.cfg.events),this.set({events:this.uploadEvents.events}));this._={};this.init();return this.instance};b.prototype={init:function(){for(var a=this,g=this.cfg.priority,e,m=0;m<g.length;m++)if(c[g[m]]){e=
g[m];break}g={html5:"Upload_HTML5",flash:"Upload_Flash",iframe:"Upload_Iframe"};if(e){if(e===b.MODE.FLASH){for(var n in this.cfg.events)this.cfg.events[n]=function(a,e){var c=b.File4Flash;return function(b){b&&b.id?a.apply(this,[new c(b)].concat([].slice.call(arguments,1))):a.apply(this,[].slice.call(arguments,0))}}.call(this,this.cfg.events[n],n);this.cfg.fileTypes=d.convertMimeTypes(this.cfg.fileTypes);this.cfg.events.ready=function(b){return function(){setTimeout(function(){b.call(a.instance,e)},
25)}}(this.cfg.events.ready)}else this.cfg.fileTypes=d.convert2MimeTypes(this.cfg.fileTypes);this.instance=new l[g[e]](this.cfg);e!==b.MODE.FLASH&&setTimeout(function(){a.cfg.events.ready.call(a.instance,e)},25);n=b.plugins;n.UploadEvents&&(this.uploadEvents.bindThisObj(this.instance),"on,one,off,fire".replace(/(\w+)/g,function(b){a.instance[b]=function(){a.uploadEvents[b].apply(a.uploadEvents,arguments);return a.instance}}));for(var s in n)s.replace(/([\$\^\[\]\\/\,\?\:\|\{\}\!\(\)\*\-\+])/g,"\\$1"),
"UploadEvents"!==s&&RegExp("(^|,)"+s+"(,|$)").exec(this.cfg.plugins)&&n[s].call(this.instance,this.instance.mode)}else throw"not support this constructor.";},set:function(a){var b=this.cfg.plugins;a&&(a.plugins&&"string"===d.type(a.plugins))&&(b+=","+a.plugins,b=d.unique(b.split(/[,;\s]+/)).join(","));d.extend(!0,this.cfg,a);this.cfg.plugins=b}}}.call(FOCUS,this,this.document);
void function(h,k,p){var d=this.widget.Upload,l=this.util;h=d.MODE={HTML5:"html5",FLASH:"flash",IFRAME:"iframe",DEFAULT:"html5"};d.PRIORITY={DEFAULT:[h.HTML5,h.FLASH,h.IFRAME]};d.MIME_TYPE={ALL:"*/*",IMAGE:"image/*",JPG:"image/jpeg",JPEG:"image/jpeg",PNG:"image/png",GIF:"image/gif",PDF:"application/pdf",DOC:"application/msword",DOCX:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",XLS:"application/vnd.ms-excel",XLSX:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
PPT:"application/vnd.ms-powerpoint",PPTX:"application/vnd.openxmlformats-officedocument.presentationml.presentation",TXT:"text/plain",UNKNOWN:"application/octet-stream"};d.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130,CHAIN_ERROR:-140};d.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,
UPLOAD_STOPPED:-290,RESIZE:-300,TIMEOUT:-310};d.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5,NEW:-6};d.UPLOAD_TYPE={SINGLE:1,MULTI:2};d.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};d.CURSOR={POINTER:-2,DEFAULT:-1};d.CSS={WRAP:"FOCUS_UPLOAD_wrap",SELECTOR:"FOCUS_UPLOAD_selector",FLASH:"FOCUS_UPLOAD_flashWrap",TEXT:"FOCUS_UPLOAD_text",DISABLED:"FOCUS_UPLOAD_wrap_disabled",HOVER:"FOCUS_UPLOAD_wrap_hover"};d.CHARSET={UTF8:"UTF-8",
GBK:"GBK",GB2312:"GB2312",BIG5:"BIG5",DEFAULT:"UTF-8"};d.TURNING={ON:!0,OFF:!1};var a=function(a,b){b=b||{};var f=a.split(/\./);b.suffix=1<f.length?f.pop():"";b.name=f.join(".");return b};d.File=function(c){var b={data:c};b.id="FOCUS_UPLOAD_"+(l.random(0,1E6)+~~((new Date).valueOf()/1E7)).toString(16).toUpperCase();if(c.tagName&&"input"===c.tagName.toLowerCase()&&"file"===c.type){if(c=/[^\/\\]+$/.exec(c.value))b.fullname=c[0],a(b.fullname,b)}else b.size=c.filesize||c.size||0,b.type=c.type||"",b.fullname=
c.filename||c.name||"",a(b.fullname,b);b.type=b.suffix?b.suffix.toUpperCase()in d.MIME_TYPE?d.MIME_TYPE[b.suffix.toUpperCase()]:"":"";b.status=d.FILE_STATUS.NEW;return b};d.File4Flash=function(a){this.data=a;this.id=a.id;this.size=a.size;this.status=a.filestatus;this.suffix=a.type.replace(/^\./,"");this.type=d.MIME_TYPE[this.suffix.toUpperCase()];this.fullname=a.name;a=this.fullname.split(/\./);1<a.length&&a.pop();this.name=a.join(".")}}.call(FOCUS,this,this.document);
void function(h,k){FOCUS.namespace("FOCUS.widget");var p=function(){},d=this.util,l=this.widget,a=l.Upload,c=a.CSS,b=a.MODE,f=a.UPLOAD_ERROR,g=a.FILE_STATUS;l.UploadBase=function(){};l.UploadBase.prototype={init:p,set:function(a){this.cfg=d.extend(!0,this.cfg,a)},debug:function(a){d.log.turn(!!a)},startUpload:p,getFile:p,cancelUpload:function(a){var b=this.getQueueFile();if(b){b.status=g.CANCELLED;if("function"===d.type(a))this.one("uploadError",a);this.cfg.events.uploadError.call(this,b,f.FILE_CANCELLED,
"file cancelled.");this.elems.poster&&this.elems.poster.abort()}},stopUpload:function(a){var b=this.getQueueFile();if(b){b.status=g.QUEUED;if("function"===d.type(a))this.one("uploadError",a);this.cfg.events.uploadError.call(this,b,f.UPLOAD_STOPPED,"upload stopped.");this.elems.poster&&this.elems.poster.abort();this._.queue.unshift(b)}},getQueueFile:function(a){a=a||0;var b=d.type(a),c=this._.queue,f=null;if("number"===b)a<=c.length-1&&(f=c[a]);else if("string"===b)for(b=0;b<c.length;b++)if(c[b].id===
a){f=c[b];break}return f},setPostParam:function(a){this.cfg.postParams||(this.cfg.postParams={});d.extend(!0,this.cfg.postParams,a)},addPostParam:function(a,b){this.cfg.postParams||(this.cfg.postParams={});this.cfg.postParams[a]=b},removePostParam:function(a){!this.cfg.postParams||!a?this.cfg.postParams={}:a in this.cfg.postParams&&delete this.cfg.postParams[a]},setUploadURL:function(a){this.cfg.uploadURL=a+""},setFilePostName:function(a){this.cfg.filePostName=a+""},setFileTypes:function(a){switch(this.mode){case b.IFRAME:case b.HTML5:this.cfg.fileTypes=
this.elems.selector.accept=d.convert2MimeTypes(a)}},setFileSizeLimit:function(a){this.cfg.sizeLimit=a},setFileQueueLimit:function(a){this.cfg.queueLimit=a;this.elems.selector.multiple=1!==a},__setStyle:function(a,b,f,g){b.className=c.WRAP;d.browser.firefox&&(f.size=6);f.className=c.SELECTOR;a=b.getElementsByTagName("label");a.length&&b.removeChild(a[0]);a=k.createElement("label");a.className=c.TEXT;a.innerHTML=g;b.insertBefore(a,f);d.event.bind(b,"mouseover",function(a){a.cancelBubble=!0;a.returnValue=
!1;d.addClass(b,c.HOVER)});d.event.bind(b,"mouseout",function(a){a.cancelBubble=!0;a.returnValue=!1;d.removeClass(b,c.HOVER)})},__translateStatus:function(b){var c=d.type(b);"string"===c?(b=d.trim(b),b=b.length?!!a.TURNING[b.toUpperCase()]:a.TURNING.OFF):b="undefined"===c?!this._.status:!!b;return b},turn:function(a){a=this.__translateStatus(a);a!==this._.status&&(this.elems.selector.disabled=!a,this._.status=a,d[a?"removeClass":"addClass"](this.elems.holder,c.DISABLED))},multiple:function(a){this.elems.selector.multiple=
!!a},queue:function(){},dequeue:function(a){if(this.mode===b.IFRAME||this.mode===b.HTML5)switch(d.type(a)){case "string":for(var c=0;c<this._.queue.length;c++)if(this._.queue[c].id===a){a=c;break}case "number":this._.queue.splice(a,1);break;case "boolean":a?this._.queue.splice(0):this._.queue.splice(0,1)}else if(this.mode===b.FLASH)switch(d.type(a)){case "string":case "number":this.instance.cancelUpload(a,!1);break;case "undefined":a=!1;case "boolean":if(a)for(;a=this.instance.getQueueFile();)this.instance.cancelUpload(a.file_id,
!1);else this.instance.cancelUpload(0,!1)}}}}.call(FOCUS,this,this.document);
void function(h,k){var p=this.namespace("FOCUS.widget.Upload.plugins"),d=this.util,l=this.widget.Upload.UPLOAD_ERROR,a=function(a,c){this.type=a;this.listeners=[];this._={thisObj:c}};a.prototype={__search:function(a,c){for(var g=-1,e=c||0;e<this.listeners.length;e++)if(this.listeners[e].handle===a){g=e;break}return g},add:function(a,c){var g=a.handles,e=a.thisObj||null,h=a.once||!1;c=[].slice.call(arguments,1);"function"===d.type(g)&&(g=[g]);if("array"===d.type(g))for(var n=0;n<g.length;n++)"function"===
d.type(g[n])&&this.listeners.push({handle:g[n],thisObj:e,once:!!h,args:c})},one:function(a,c){"object"===d.type(a)&&(a.once=!0,this.add(a,[].slice.call(arguments,1)))},remove:function(a){if(a){"function"===d.type(a)&&(a=[a]);for(var c,g=0;g<a.length;g++)"function"===d.type(a[g])&&-1!==(c=this.__search(a[g]))&&this.listeners.splice(c,1)}else this.listeners=[]},exec:function(a){for(var c,g=[],e=0;e<this.listeners.length;e++)c=this.listeners[e],c.once&&g.push(c.handle),c.handle.apply(c.thisObj||this._.thisObj||
this,[].concat.call(c.args,[].slice.call(arguments)));this.remove(g)},bindThisObj:function(a){this._.thisObj=a}};var c=function(a,c){this._={events:{},thisObj:c};this.events={};for(var g in a)this.on(g,a[g]),this.events[g]=function(a){var b=this;return"uploadError"===a?function(c,f,g){switch(f){case l.FILE_CANCELLED:b.fire.apply(b,["cancel",c,l.FILE_CANCELLED,"file cancelled."]);break;case l.UPLOAD_STOPPED:b.fire.apply(b,["stop",c,l.UPLOAD_STOPPED,"upload stopped."]);break;default:b.fire.apply(b,
[a].concat([].slice.call(arguments)))}}:function(){b.fire.apply(b,[a].concat([].slice.call(arguments)))}}.call(this,g)};c.prototype={__initEvent:function(b,c,g){b in this._.events||(this._.events[b]=new a(b,this._.thisObj));return{handles:c,thisObj:g}},on:function(a,c,g,e){var d=this.__initEvent(a,c,g);this._.events[a].add.apply(this._.events[a],[d].concat([].slice.call(arguments,3)))},off:function(a,c){a in this._.events&&this._.events[a].remove(c)},one:function(a,c,g,e){var d=this.__initEvent(a,
c,g);this._.events[a].one.apply(this._.events[a],[d].concat([].slice.call(arguments,3)))},fire:function(a,c){a in this._.events&&this._.events[a].exec.apply(this._.events[a],[].slice.call(arguments,1))},bindThisObj:function(a){this._.thisObj=a;for(var c in this._.events)this._.events[c].bindThisObj(a)}};p.UploadEvents=c}.call(FOCUS,window,window.document);
void function(){this.namespace("FOCUS.widget.Upload.plugins").AutoDisabled=function(h){this.on("uploadStart",function(){this.turn("off")}).on("uploadComplete",function(){this.turn("on")})}}.call(FOCUS);void function(){var h=this.util;this.widget.Upload.plugins.Ready=function(k){var p=!1,d=this,l=[],a=function(){for(;l.length;)l.shift().call(d,k)};this.on("ready",function(){this.isReady=p=!0;a()});this.ready=function(c){"function"===h.type(c)&&l.push(c);p&&a()}}}.call(FOCUS);
void function(h,k,p){var d=this,l=this.util;p=this.widget.Upload;var a=p.MODE,c=this.BASEPATH,b=this.UUID;p.plugins.Patch4Charset=function(f){if(f===a.HTML5&&(swfobject&&l.flash.has&&h.FormData&&h.FormData.customized)&&(f="FOCUS_UPLOAD_PATCH_CHARSET_"+b,!swfobject.getObjectById(f))){var g=k.createElement("div");g.style.cssText=";position:absolute; top:0; right:2px; float:none; display:block; width:1px; height:1px; margin:0; padding:0; border:0 none; font-size:0; line-height:0; background-color:transparent;";
var e=k.createElement("span");e.id=f;k.body.appendChild(g);g.appendChild(e);swfobject.embedSWF(this.cfg.pathCharset||d.PATH_CHARSET||c+"widget/upload/html5/transformCharset/transformCharset.swf",e.id,1,1,"9.0.0",null,null,null,null,function(){var a=h.setInterval(function(){var b=swfobject.getObjectById(e.id);b&&(h.clearInterval(a),l.transformCharset=function(a,c){return b.transformCharset(a,c||"UTF-8")})},25)})}}}.call(FOCUS,this,document);
void function(h,k,p){h=this.namespace("FOCUS.widget.io.iframe");var d=this.util,l=d.createElement;k=function(){this.elems={}};k.prototype={_:{text:function(a,c){return l({el:"textarea",name:a,value:c+""})},radio:function(a,c,b){return l({el:"input",type:"radio",name:a,value:c,checked:!!b})},checkbox:function(a,c,b){return l({el:"input",type:"checkbox",name:a,value:c,checked:!!b})},file:function(a,c){if(a)return c&&c.name&&(a.name=c.name),a;var b={el:"input",type:"file"};d.extend(!0,b,c);return l(b)},
clone:function(a){return a.cloneNode(!0)}},append:function(a,c){var b=d.type(c),f;"string"!==b&&"file"===c.type?f=this._.file(c,{name:a}):"string"===b&&(f=this._.text(a,c+""));this.elems[a]=f}};h.IO_FormData=k}.call(FOCUS,window,document);
void function(h,k,p){p=this.namespace("FOCUS.widget.io.iframe");var d=function(){},l=this.util,a=l.createElement,c=function(a){this.cfg={events:{load:d,error:d},timeout:1E5,charset:"UTF-8"};l.extend(!0,this.cfg,a);this.elems={};this._={};this.init()};c.prototype={init:function(){var b=this;this.elems.io=a({el:"iframe",name:"FOCUS_UPLOAD_IO_"+l.random(0,1E3),src:l.browser.msie?"javascript:document.open();"+(k.domain===h.location.hostname?"":"document.domain='"+k.domain+"';")+"void(0)":"about:blank"});
this.elems.io.style.cssText="position:absolute; width:1px; height:1px; top: -9999px; left:-9999px;";k.body.appendChild(b.elems.io);setTimeout(function(){b.elems.win=b.elems.io.contentWindow;b.elems.doc=b.elems.io.contentWindow.document},25);this._.timer=-1;this._.handle={load:function(){if(b._.submited){clearTimeout(b._.timer);var a=b._.handle.getData(b.elems.io);"undefined"===l.type(a)?b.cfg.events.error.call(this,"IO_ERROR"):b.cfg.events.load.call(this,a);b._.submited=!1;setTimeout(function(){b._deleteForm()},
25)}},error:function(){b.cfg.events.error.call(this);b._.submited=!1},getData:function(a){var b;try{b=a.contentWindow.document.body.innerHTML.replace(/(^|)\<\/?pre[^\>]*\>(|$)/gi,"")}catch(c){}return b}};this.elems.io.attachEvent?this.elems.io.attachEvent("onload",this._.handle.load):this.elems.io.onload=this._.handle.load},open:function(a,c){this._.openCfg={method:"GET"===a.toUpperCase()?"GET":"POST",action:c}},send:function(b,c){var d=this;setTimeout(function(){var e={el:"form",name:"FOCUS_UPLOAD_FORM_"+
l.random(0,1E3),method:d._.openCfg.method,action:d._.openCfg.action||""};e.target=d.elems.io.name;var h=[],n=!1,s,w;for(w in b.elems)s=b.elems[w],"file"===s.type&&(n=!0),h.push(s);e.enctype=n?"multipart/form-data":"application/x-www-form-urlencoded";d._deleteForm();var x=d.elems.__submit_form=a(e);x.style.cssText="position:absolute; width:1px; height:1px; top: -9999px; left:-9999px;";for(k.body.appendChild(x);h.length;)x.appendChild(h.shift());c=c||d.cfg.charset||"UTF-8";var p;l.browser.msie&&(p=
k.charset);l.browser.msie?k.charset=c:x.acceptCharset=c;setTimeout(function(){d._.submited=!0;x.submit();setTimeout(function(){l.browser.msie&&(k.charset=p)},1)},25)},100)},onload:function(a){this.cfg.events.load=a},onerror:function(a){this.cfg.events.error=a},overrideGetData:function(a){this._.handle.getData=a},setUrl:function(a){this.elems.__submit_form.action=a},_deleteForm:function(){try{this.elems.__submit_form&&this.elems.__submit_form.parentNode.removeChild(this.elems.__submit_form)}catch(a){}delete this.elems.__submit_form},
_deleteIO:function(){try{this.elems.io&&(this.__removeOnloadEvent(),this.elems.io.parentNode.removeChild(this.elems.io))}catch(a){}delete this.elems.doc;delete this.elems.win;delete this.elems.io},dispose:function(){this._deleteForm();this._deleteIO()},__removeOnloadEvent:function(){this.elems.io&&(this.elems.io.detachEvent?this.elems.io.detachEvent("onload",this._.handle.load):this.elems.io.onload=d)}};p.IO_Iframe=c}.call(FOCUS,window,document);
void function(h,k,p){h=this.namespace("FOCUS.widget.io.iframe");var d=h.IO_FormData,l=h.IO_Iframe,a=this.util,c=function(){};k=function(a){this.cfg={events:{error:c,load:c,progress:c,abort:c},progressURL:"",charset:"UTF-8",timeout:1E5};this._={cancel:!1,timeout:!1,loaded:!1,timeoutTimer:-1};this.elems={};this.set(a);this.init()};k.prototype={init:function(){var b=this;this._.getProgress=function(){var c=arguments.callee;if(b.cfg.progressURL&&!b._.loaded){b.elems.io_progress=new l;b.elems.io_progress.onload(function(e){setTimeout(function(){b.elems.io_progress.dispose()},
25);b._.loaded||(e=a.JSON.parse(e),b.cfg.events.progress.call(e),setTimeout(function(){c()},100))});b.elems.io_progress.open("GET",b.cfg.progressURL,!0);var g=new d;g.append("progress","loaded");b.elems.io_progress.send(g)}}},send:function(a){if(!this._.cancel){var c=this;this._.timeoutTimer=setTimeout(function(){c.timeout()},this.cfg.timeout);this.elems.io.send(a,this.cfg.charset);setTimeout(function(){c._.cancel||c.cfg.events.progress.call(c,{loaded:0,total:100})},1);this._.getProgress()}},open:function(a,
c){this._.fullProgress=!1;this.reset();this.elems.io.open(a,c)},set:function(b){a.extend(!0,this.cfg,b)},reset:function(){var a=this;this.elems.io&&this.elems.io.dispose();this.elems.io_progress&&this.elems.io_progress.dispose();this.elems.io=new l({timeout:this.cfg.timeout});this.elems.io.onload(function(c){a._.timeout||(a._.fullProgress||(a.cfg.events.progress.call(a,{loaded:100,total:100}),a._.fullProgress=!0),clearTimeout(a._.timeoutTimer),a._.cancel||(a._.loaded=!0,a.cfg.events.load.call(a,c,
this)))});this.elems.io.onerror(function(c){clearTimeout(a._.timeoutTimer);a._.cancel||a.cfg.events.error.call(a,this,c)});this._.cancel=!1;this._.timeout=!1;this._.loaded=!1;this._.timeoutTimer=-1},dispose:function(){this.elems.io&&(this.elems.io.dispose(),delete this.elems.io);this.elems.io_progress&&(this.elems.io_progress.dispose(),delete this.elems.io_progress)},timeout:function(){this._.timeout=!0;this.elems.io.__removeOnloadEvent();this.cfg.events.error.call(this,this,"timeout")},abort:function(){this._.cancel=
!0;clearTimeout(this._.timeoutTimer);this.elems.io&&this.elems.io.__removeOnloadEvent();this.cfg.events.abort()}};h.Poster=k}.call(FOCUS,window,document);
void function(h,k,p){var d=function(){},l=this.util,a=this.widget,c=a.Upload,b=c.MODE,f=c.UPLOAD_ERROR,g=c.FILE_STATUS,e=c.QUEUE_ERROR,m=l.createElement,n=a.io.iframe,s=n.Poster,w=n.IO_FormData;a.Upload_Iframe=function(a){this.constructor=arguments.callee;this.mode=b.IFRAME;this.elems={};this.cfg={events:{ready:d,loadFailed:d,dialogStart:d,dialogComplete:d,queued:d,queueError:d,uploadStart:d,uploadProgress:d,uploadSuccess:d,uploadError:d,uploadComplete:d},button:{text:"Upload"},multiple:!0,sizeLimit:-1,
queueLimit:-1,fileTypes:c.MIME_TYPE.ALL,fileTypesDescription:"All Files",uploadURL:"",filePostName:"",placeholder:"#uploader",charset:c.CHARSET.DEFAULT,debug:!1,timeout:1E5};this._={queue:[],uploadingFile:null,uploadedFile:[],status:c.TURNING.ON};this.set(a);this.init()};a.Upload_Iframe.prototype=new FOCUS.widget.UploadBase;l.extend(!0,a.Upload_Iframe.prototype,{init:function(){var a=this;this.elems.holder=m({el:"div"});this.elems.holder.style.cssText="";var b={missing_url:[f.MISSING_UPLOAD_URL,"missing upload URL."],
invalid_filetype:[e.INVALID_FILETYPE,"File is not an allowed file type."],size_limit:[e.FILE_EXCEEDS_SIZE_LIMIT,"File size exceeds allowed limit."],chain_error:[e.CHAIN_ERROR,"Some reason to occured chain error."]};l.extend(this._,{open:function(b){var c=new w;if("object"===l.type(a.cfg.postParams))for(var e in a.cfg.postParams)c.append(e,a.cfg.postParams[e]);c.append(a.cfg.filePostName||b.id,b.data);a.elems.poster.open("POST",a.cfg.uploadURL,!0);return c},post:function(b){a.elems.poster.send(b)},
start:function(c){if(c=a.getQueueFile())!a.cfg.uploadURL||"string"!==l.type(a.cfg.uploadURL)?(a.cfg.events.uploadError.apply(a,[c].concat(b.missing_url)),a.stopUpload()):(c.status=g.IN_PROGRESS,a._.uploadingFile=c,a.cfg.events.uploadStart.call(a,c),c=a._.open(c),a._.post(c))},dialogStart:function(b){b=b||h.event;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;a.cfg.events.dialogStart.call(a)},__queued:function(d,f){var h=[],s=[],n=a._.queue,k=new c.File(this);if(this.files&&(!l.browser.firefox||
l.browser.firefox&&3.6<=l.browser.version)){var m=[],w=!1,p;if(-1!==a.cfg.queueLimit&&this.files.length+a._.queue.length>a.cfg.queueLimit){for(var u=0,z=this.files.length;u<z;u++)p=new c.File(this.files[u]),h.push(p),a.cfg.events.queueError.call(a,p,e.QUEUE_LIMIT_EXCEEDED,a.cfg.queueLimit);w=!0}else for(var B=l.sizeConvert.unit2Bytes(a.cfg.sizeLimit),u=0,z=this.files.length;u<z;u++){p=new c.File(this.files[u]);h.push(p);var A;if(l.mimeValidation(a.cfg.fileTypes,p.type)){if(-1!==B&&(p.fileSize||p.size)>
B)A=b.size_limit}else A=b.invalid_filetype;A?(a.cfg.events.queueError.apply(a,[p].concat(A)),w=!0):m.push(p)}if(w){u=0;for(z=m.length;u<z;u++)m[u].id=k.id,a.cfg.events.queueError.apply(a,[m[u]].concat(b.chain_error))}else{u=0;for(z=m.length;u<z;u++)m[u].status=g.QUEUED,m[u].id=k.id,a.cfg.events.queued.call(a,m[u]);s=s.concat(m);n.push(k)}delete m}else h.push(k),FOCUS.util.mimeValidation(a.cfg.fileTypes,k.type)?(s.push(k),n.push(k),k.status=g.QUEUED,a.cfg.events.queued.call(a,k)):a.cfg.events.queueError.apply(a,
[k].concat(b.invalid_filetype));d&&(a.elems.selector.parentNode.removeChild(a.elems.selector),a.elems.selector=a._._crateSelector(a.elems.holder,a._.dialogStart,a._.dialogComplete));"function"===FOCUS.util.type(f)&&f.call(a,h.length,s.length,n.length);delete h;delete s;delete n},dialogComplete:function(b){b=b||h.event;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;a._.__queued.call(this,!0,a.cfg.events.dialogComplete)},uploadProgress:function(b){var c=a.getQueueFile();c&&(c.status=g.IN_PROGRESS,
b.loaded===b.total&&(c.fullProgress=!0),a.cfg.events.uploadProgress.call(a,c,b.loaded,b.total))},uploadSuccess:function(b,c){var e=a.elems.poster,d=a.getQueueFile();d&&a.cfg.events.uploadSuccess.call(a,d,b,e)},uploadError:function(b,c){c=(c||"").toUpperCase();var e=a.getQueueFile();e&&(e.status=g.ERROR,a.cfg.events.uploadError.call(a,e,f[c?c:"UPLOAD_FAILED"],c?c:"TIMEOUT"),a._.uploadComplete(!0))},uploadComplete:function(b,c){var e=a.getQueueFile();e&&(!b&&(!e.fullProgress&&!c)&&(a._.uploadProgress.call(a,
{loaded:e.size,total:e.size}),e.fullProgress=!0),c||(e.status=g.COMPLETE),a._.queue.shift(),a._.uploadingFile=null,a.cfg.events.uploadComplete.call(a,e))},complete:function(b,c){a._.uploadSuccess.call(a,b,c);a._.uploadComplete.call(a);setTimeout(function(){a.elems.poster&&(a.elems.poster.dispose(),delete a.elems.poster)},25)},abort:function(){setTimeout(function(){a._.uploadComplete(!1,!0)},1)},_crateSelector:function(b,c,e){var d=m({el:"input",type:"file",name:"FOCUS_FILE_"+l.random(0,100),multiple:!!a.cfg.multiple});
b.appendChild(d);l.event.bind(d,"click",c);l.event.bind(d,"change",e);a.__setStyle("iframe",a.elems.holder,d,a.cfg.button.text);return d}});var d=l.query?l.query(this.cfg.placeholder):k.getElementById(this.cfg.placeholder.replace(/^#/,""));d&&("length"in d&&(d=d[0]),d&&(d.parentNode.insertBefore(this.elems.holder,d),a.elems.selector=this._._crateSelector(this.elems.holder,this._.dialogStart,this._.dialogComplete),d.parentNode.removeChild(d)))},startUpload:function(){this.elems.poster&&this.elems.poster.dispose();
this.elems.poster=new s({events:{abort:this._.abort,load:this._.complete,error:this._.uploadError,progress:this._.uploadProgress},progressURL:this.cfg.progressURL,charset:this.cfg.charset,timeout:this.cfg.timeout||1E5});this._.start()},queue:function(a,b){if(a){a.length===p&&(a=[a]);for(var c=0;c<a.length;c++)this._.__queued.call(a[c],!1,b)}}})}.call(FOCUS,this,this.document);
void function(h,k,p){var d=function(){},l=this.util;p=this.widget;var a=p.Upload,c=a.MODE,b=a.UPLOAD_ERROR,f=a.FILE_STATUS,g=a.QUEUE_ERROR;p.Upload_HTML5=function(b){this.constructor=arguments.callee;this.mode=c.HTML5;this.elems={};this.cfg={events:{ready:d,loadFailed:d,dialogStart:d,dialogComplete:d,queued:d,queueError:d,uploadStart:d,uploadProgress:d,uploadSuccess:d,uploadError:d,uploadComplete:d},button:{text:"Upload"},multiple:!0,sizeLimit:-1,queueLimit:-1,fileTypes:a.MIME_TYPE.ALL,fileTypesDescription:"All Files",
uploadURL:"",filePostName:"",placeholder:"#uploader",charset:a.CHARSET.DEFAULT,debug:!1,timeout:1E5};this._={queue:[],uploadingFile:null,cancel:!1,status:a.TURNING.ON};this.set(b);this.init()};p.Upload_HTML5.prototype=new p.UploadBase;l.extend(!0,p.Upload_HTML5.prototype,{init:function(){var c=this;this._.start=function(){var a=c.getQueueFile();a&&(!c.cfg.uploadURL||"string"!==l.type(c.cfg.uploadURL)?(c.cfg.events.uploadError.call(c,a,b.MISSING_UPLOAD_URL,"missing upload url."),c.stopUpload()):(a.status=
f.IN_PROGRESS,c._.uploadingFile=a,c.cfg.events.uploadStart.call(c,a),c._.post(a)))};this._.success=function(a){a=c.elems.poster;var b=c.getQueueFile();c.cfg.events.uploadSuccess.call(c,b,a.responseText||a.responseXML,a)};this._.error=function(a,d,g){if(!c._.cancel&&(a=c.getQueueFile()))a.status=f.ERROR,c.cfg.events.uploadError.call(c,a,d||b.UPLOAD_FAILED,g||""),c._.uploadComplete()};this._.abort=function(a){c._.cancel=!0;c._.uploadComplete(!0)};this._.progress=function(a){var b=c.getQueueFile();b&&
(a.loaded===a.total&&(b.fullProgress=!0),c.cfg.events.uploadProgress.call(c,b,a.loaded,a.total))};this._.post=function(a){c.elems.poster.open("POST",c.cfg.uploadURL,!0);var b;b=FormData.customized?new FormData(c.cfg.charset):new FormData;if("object"===l.type(c.cfg.postParams))for(var d in c.cfg.postParams)b.append(d,c.cfg.postParams[d]);b.append(c.cfg.filePostName||a.id,a.data);l.feature_upload.html5.FormData?c.elems.poster.send(b):(c.elems.poster.setRequestHeader("Content-Type","multipart/form-data; boundary="+
b.boundary),c.elems.poster.sendAsBinary(b))};this._.uploadComplete=function(a){var b=c.getQueueFile();b&&(b.fullProgress||(c._.progress.call(c,{loaded:b.size,total:b.size}),b.fullProgress=!0),a||(b.status=f.COMPLETE),c._.queue.shift(),c._.uploadingFile=null,c.cfg.events.uploadComplete.call(c,b))};this._.xhrComplete=function(a){if(4===this.readyState)switch(this.status){case 200:c._.success.call(this,a);c._.uploadComplete();break;case 404:case 500:c._.error.call(this,a,b.HTTP_ERROR,this.status)}};
this._.dialogStart=function(a){a=a||h.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;c.cfg.events.dialogStart.call(c)};this._.__queued=function(b,d){var h=!b,k=[],m=[],p=c._.queue,t;b=b||c.elems.selector.files;k=[].slice.call(b);if(-1!==c.cfg.queueLimit&&k.length+c._.queue.length>c.cfg.queueLimit)for(var v=0,D=k.length;v<D;v++)c.cfg.events.queueError.call(c,k[v],g.QUEUE_LIMIT_EXCEEDED,c.cfg.queueLimit);else{v=0;for(D=k.length;v<D;v++)if(t=new a.File(k[v]),t.status=f.ERROR,FOCUS.util.mimeValidation(c.cfg.fileTypes,
t.type))if(0===(t.fileSize||t.size))c.cfg.events.queueError.call(c,t,g.ZERO_BYTE_FILE,"File is zero bytes and cannot be uploaded.");else{var H=l.sizeConvert.unit2Bytes(c.cfg.sizeLimit);-1!==H&&(t.fileSize||t.size)>H?c.cfg.events.queueError.call(c,t,g.FILE_EXCEEDS_SIZE_LIMIT,"File size exceeds allowed limit."):(t.status=f.QUEUED,c.cfg.events.queued.call(c,t),m.push(t),p.push(t))}else c.cfg.events.queueError.call(c,t,g.INVALID_FILETYPE,"File is not an allowed file type.")}h?(c._._resetSelector(),c.cfg.events.dialogComplete.call(c,
k.length,m.length,p.length)):"function"===l.type(d)&&d.call(c,k.length,m.length,p.length);delete k;delete m;delete p};this._.dialogComplete=function(a,b){a=a||h.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;c._.__queued()};this._._resetSelector=function(){c.elems.resetForm.appendChild(c.elems.selector);setTimeout(function(){c.elems.resetForm.reset();setTimeout(function(){c.elems.holder.appendChild(c.elems.selector)},25)},25)};this.elems.holder=k.createElement("div");this.elems.holder.style.cssText=
"";this.elems.resetForm=k.createElement("form");this.elems.selector=k.createElement("input");this.elems.selector.type="file";this.elems.selector.multiple=l.feature_upload.html5.multiple&&this.cfg.multiple;this.elems.holder.accept=this.cfg.fileTypes;var d=l.query?l.query(this.cfg.placeholder):k.querySelectorAll(this.cfg.placeholder);d.length&&(d=d[0],d.parentNode.insertBefore(this.elems.holder,d),this.elems.holder.appendChild(this.elems.selector),d.parentNode.removeChild(d),FOCUS.util.event.bind(this.elems.selector,
"click",this._.dialogStart),FOCUS.util.event.bind(this.elems.selector,"change",this._.dialogComplete),this.__setStyle("html5",this.elems.holder,this.elems.selector,this.cfg.button.text))},startUpload:function(){this.elems.poster=new XMLHttpRequest;l.event.bind(this.elems.poster.upload,"progress",this._.progress);l.event.bind(this.elems.poster.upload,"error",this._.error);l.event.bind(this.elems.poster.upload,"abort",this._.abort);l.event.bind(this.elems.poster,"readystatechange",this._.xhrComplete);
this._.start()},queue:function(a,b){a.files&&(a=a.files);a&&a.length&&this._.__queued(a,b)}})}.call(FOCUS,this,this.document);var SWFUpload,swfobject;void 0==SWFUpload&&(SWFUpload=function(h){this.initSWFUpload(h)});
void function(h){var k=window.encodeURIComponent,p=this.widget.Upload,d=this.util,l=h.prototype;l.initSWFUpload=function(a){try{this.customSettings={},this.settings={},this.eventQueue=[],this.movieName="SWFUpload_"+h.movieCount++,this.movieElement=null,h.instances[this.movieName]=this,this.initSettings(a),this.loadSupport(),this.swfuploadPreload()&&this.loadFlash(),this.displayDebugInfo()}catch(c){throw delete h.instances[this.movieName],c;}};h.instances={};h.movieCount=0;h.version="2.5.0 2010-01-15 Beta 2";
h.QUEUE_ERROR=p.QUEUE_ERROR;h.UPLOAD_ERROR=p.UPLOAD_ERROR;h.FILE_STATUS=p.FILE_STATUS;h.BUTTON_ACTION=p.BUTTON_ACTION;h.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2};h.CURSOR={ARROW:-1,HAND:-2};h.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};h.RESIZE_ENCODING={JPEG:-1,PNG:-2};h.completeURL=function(a){try{var c="",b=-1;if("string"!==typeof a||a.match(/^https?:\/\//i)||a.match(/^\//)||""===a)return a;b=window.location.pathname.lastIndexOf("/");c=0>=b?"/":window.location.pathname.substr(0,
b)+"/";return c+a}catch(d){return a}};h.onload=function(){};d.extend(!0,l,{initSettings:function(a){var c=this.settings;this.ensureDefault=function(b,d){var e=a[b];c[b]=void 0!=e?e:d};var b=function(a){for(var b in a)this.ensureDefault(b,a[b])};b.call(this,{upload_url:"",preserve_relative_urls:!1,file_post_name:"Filedata",post_params:{},use_query_string:!1,requeue_on_error:!1,http_success:[],assume_success_timeout:0,file_types:"*.*",file_types_description:"All Files",file_size_limit:0,file_upload_limit:0,
file_queue_limit:0,flash_url:"swfupload.swf",flash9_url:"swfupload_fp9.swf",prevent_swf_caching:!0,button_image_url:"",button_width:1,button_height:1,button_text:"",button_text_style:"color: #000000; font-size: 16pt;",button_text_top_padding:0,button_text_left_padding:0,button_action:h.BUTTON_ACTION.SELECT_FILES,button_disabled:!1,button_placeholder_id:"",button_placeholder:null,button_cursor:h.CURSOR.ARROW,button_window_mode:h.WINDOW_MODE.WINDOW});b.call(this,{debug:!1});c.debug_enabled=c.debug;
c.return_upload_start_handler=this.returnUploadStart;b.call(this,{swfupload_preload_handler:null,swfupload_load_failed_handler:null,swfupload_loaded_handler:null,file_dialog_start_handler:null,file_queued_handler:null,file_queue_error_handler:null,file_dialog_complete_handler:null,upload_resize_start_handler:null,upload_start_handler:null,upload_progress_handler:null,upload_error_handler:null,upload_success_handler:null,upload_complete_handler:null,mouse_click_handler:null,mouse_out_handler:null,
mouse_over_handler:null,debug_handler:this.debugMessage,custom_settings:{}});this.customSettings=c.custom_settings;c.prevent_swf_caching&&(c.flash_url=c.flash_url+(0>c.flash_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime(),c.flash9_url=c.flash9_url+(0>c.flash9_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime());c.preserve_relative_urls||(c.upload_url=h.completeURL(c.upload_url),c.button_image_url=h.completeURL(c.button_image_url));delete this.ensureDefault},loadSupport:function(){this.support=
{loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")}},loadFlash:function(){var a,c,b;if(this.support.loading)if(null!==document.getElementById(this.movieName))this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);else if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",
["button place holder not found"]);else{c="block"!==(a.currentStyle&&a.currentStyle.display||window.getComputedStyle&&document.defaultView.getComputedStyle(a,null).getPropertyValue("display"))?"span":"div";c=document.createElement(c);b=this.getFlashHTML();try{c.innerHTML=b}catch(d){this.support.loading=!1;this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"]);return}b=c.getElementsByTagName("object");!b||1<b.length||0===b.length?(this.support.loading=!1,
this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"])):(1===b.length&&(this.movieElement=b[0]),a.parentNode.replaceChild(c.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement()))}else this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"])},getFlashHTML:function(a){a=this.settings;return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.support.imageResize?
a.flash_url:a.flash9_url,'" width="',a.button_width,'" height="',a.button_height,'" class="swfupload"><param name="wmode" value="',a.button_window_mode,'" /><param name="movie" value="',this.support.imageResize?a.flash_url:a.flash9_url,'" /><param name="quality" value="high" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},getFlashVars:function(){var a,c;c=this.buildParamString();a=this.settings.http_success.join(",");
var b=this.settings;return["movieName=",k(this.movieName),"&amp;uploadURL=",k(b.upload_url),"&amp;useQueryString=",k(b.use_query_string),"&amp;requeueOnError=",k(b.requeue_on_error),"&amp;httpSuccess=",k(a),"&amp;assumeSuccessTimeout=",k(b.assume_success_timeout),"&amp;params=",k(c),"&amp;filePostName=",k(b.file_post_name),"&amp;fileTypes=",k(b.file_types),"&amp;fileTypesDescription=",k(b.file_types_description),"&amp;fileSizeLimit=",k(b.file_size_limit),"&amp;fileUploadLimit=",k(b.file_upload_limit),
"&amp;fileQueueLimit=",k(b.file_queue_limit),"&amp;debugEnabled=",k(b.debug_enabled),"&amp;buttonImageURL=",k(b.button_image_url),"&amp;buttonWidth=",k(b.button_width),"&amp;buttonHeight=",k(b.button_height),"&amp;buttonText=",k(b.button_text),"&amp;buttonTextTopPadding=",k(b.button_text_top_padding),"&amp;buttonTextLeftPadding=",k(b.button_text_left_padding),"&amp;buttonTextStyle=",k(b.button_text_style),"&amp;buttonAction=",k(b.button_action),"&amp;buttonDisabled=",k(b.button_disabled),"&amp;buttonCursor=",
k(b.button_cursor)].join("")},getMovieElement:function(){void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName));if(null===this.movieElement)throw"Could not find Flash element";return this.movieElement},buildParamString:function(){var a,c,b=[];c=this.settings.post_params;if("object"===typeof c)for(a in c)c.hasOwnProperty(a)&&b.push(k(a.toString())+"="+k(c[a].toString()));return b.join("&amp;")},destroy:function(){var a;try{this.cancelUpload(null,!1);if(a=this.cleanUp())try{a.parentNode.removeChild(a)}catch(c){}window[this.movieName]=
null;h.instances[this.movieName]=null;delete h.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(b){return!1}},displayDebugInfo:function(){var a=this.settings;this.debug(["---SWFUpload Instance Info---\nVersion: ",h.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",a.upload_url,"\n\tflash_url:                ",a.flash_url,"\n\tflash9_url:                ",a.flash9_url,"\n\tuse_query_string:         ",
a.use_query_string.toString(),"\n\trequeue_on_error:         ",a.requeue_on_error.toString(),"\n\thttp_success:             ",a.http_success.join(", "),"\n\tassume_success_timeout:   ",a.assume_success_timeout,"\n\tfile_post_name:           ",a.file_post_name,"\n\tpost_params:              ",a.post_params.toString(),"\n\tfile_types:               ",a.file_types,"\n\tfile_types_description:   ",a.file_types_description,"\n\tfile_size_limit:          ",a.file_size_limit,"\n\tfile_upload_limit:        ",
a.file_upload_limit,"\n\tfile_queue_limit:         ",a.file_queue_limit,"\n\tdebug:                    ",a.debug.toString(),"\n\tprevent_swf_caching:      ",a.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",a.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",a.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",a.button_image_url.toString(),"\n\tbutton_width:             ",a.button_width.toString(),"\n\tbutton_height:            ",a.button_height.toString(),
"\n\tbutton_text:              ",a.button_text.toString(),"\n\tbutton_text_style:        ",a.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",a.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",a.button_text_left_padding.toString(),"\n\tbutton_action:            ",a.button_action.toString(),"\n\tbutton_cursor:            ",a.button_cursor.toString(),"\n\tbutton_disabled:          ",a.button_disabled.toString(),"\n\tcustom_settings:          ",a.custom_settings.toString(),
"\nEvent Handlers:\n\tswfupload_preload_handler assigned:  ",("function"===typeof a.swfupload_preload_handler).toString(),"\n\tswfupload_load_failed_handler assigned:  ",("function"===typeof a.swfupload_load_failed_handler).toString(),"\n\tswfupload_loaded_handler assigned:  ",("function"===typeof a.swfupload_loaded_handler).toString(),"\n\tmouse_click_handler assigned:       ",("function"===typeof a.mouse_click_handler).toString(),"\n\tmouse_over_handler assigned:        ",("function"===typeof a.mouse_over_handler).toString(),
"\n\tmouse_out_handler assigned:         ",("function"===typeof a.mouse_out_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",("function"===typeof a.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof a.file_queued_handler).toString(),"\n\tfile_queue_error_handler assigned:  ",("function"===typeof a.file_queue_error_handler).toString(),"\n\tupload_resize_start_handler assigned:      ",("function"===typeof a.upload_resize_start_handler).toString(),
"\n\tupload_start_handler assigned:      ",("function"===typeof a.upload_start_handler).toString(),"\n\tupload_progress_handler assigned:   ",("function"===typeof a.upload_progress_handler).toString(),"\n\tupload_error_handler assigned:      ",("function"===typeof a.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof a.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof a.upload_complete_handler).toString(),
"\n\tdebug_handler assigned:             ",("function"===typeof a.debug_handler).toString(),"\nSupport:\n\tLoad:                     ",this.support.loading?"Yes":"No","\n\tImage Resize:             ",this.support.imageResize?"Yes":"No","\n"].join(""))},addSetting:function(a,c,b){return void 0==c?this.settings[a]=b:this.settings[a]=c},getSetting:function(a){return void 0!=this.settings[a]?this.settings[a]:""},callFlash:function(a,c){var b,d,g;c=c||[];b=this.getMovieElement();try{void 0!=b?(g=b.CallFunction('<invoke name="'+
a+'" returntype="javascript">'+__flash__argumentsToXML(c,0)+"</invoke>"),d=eval(g)):this.debug("Can't call flash because the movie wasn't found.")}catch(e){this.debug("Exception calling flash function '"+a+"': "+e.message)}void 0!=d&&"object"===typeof d.post&&(d=this.unescapeFilePostParams(d));return d},selectFile:function(){this.callFlash("SelectFile")},selectFiles:function(){this.callFlash("SelectFiles")},startUpload:function(a){this.callFlash("StartUpload",[a])},startResizedUpload:function(a,c,
b,d,g,e){this.callFlash("StartUpload",[a,{width:c,height:b,encoding:d,quality:g,allowEnlarging:e}])},cancelUpload:function(a,c){!1!==c&&(c=!0);this.callFlash("CancelUpload",[a,c])},stopUpload:function(){this.callFlash("StopUpload")},requeueUpload:function(a){return this.callFlash("RequeueUpload",[a])},getStats:function(){return this.callFlash("GetStats")},setStats:function(a){this.callFlash("SetStats",[a])},getFile:function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",
[a])},getQueueFile:function(a){return"number"===typeof a?this.callFlash("GetFileByQueueIndex",[a]):this.callFlash("GetFile",[a])},addFileParam:function(a,c,b){return this.callFlash("AddFileParam",[a,c,b])},removeFileParam:function(a,c){this.callFlash("RemoveFileParam",[a,c])},setUploadURL:function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])},setPostParams:function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])},addPostParam:function(a,c){this.settings.post_params[a]=
c;this.callFlash("SetPostParams",[this.settings.post_params])},removePostParam:function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])},setFileTypes:function(a,c){this.settings.file_types=a;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[a,c])},setFileSizeLimit:function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])},setFileUploadLimit:function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",
[a])},setFileQueueLimit:function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])},setFilePostName:function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])},setUseQueryString:function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])},setRequeueOnError:function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])},setHTTPSuccess:function(a){"string"===typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=
a;this.callFlash("SetHTTPSuccess",[a])},setAssumeSuccessTimeout:function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])},setDebugEnabled:function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])},setButtonImageURL:function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])},setButtonDimensions:function(a,c){this.settings.button_width=a;this.settings.button_height=c;var b=this.getMovieElement();
void 0!=b&&(b.style.width=a+"px",b.style.height=c+"px");this.callFlash("SetButtonDimensions",[a,c])},setButtonText:function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])},setButtonTextPadding:function(a,c){this.settings.button_text_top_padding=c;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,c])},setButtonTextStyle:function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])},setButtonDisabled:function(a){this.settings.button_disabled=
a;this.callFlash("SetButtonDisabled",[a])},setButtonAction:function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])},setButtonCursor:function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])},queueEvent:function(a,c){var b=this;void 0==c?c=[]:c instanceof Array||(c=[c]);if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,c)}),setTimeout(function(){b.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+
a+" is unknown or is not a function";},executeNextEvent:function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"===typeof a&&a.apply(this)},unescapeFilePostParams:function(a){var c=/[$]([0-9a-f]{4})/i,b={},d,g,e;if(void 0!=a){for(g in a.post)if(a.post.hasOwnProperty(g)){for(d=g;null!==(e=c.exec(d));)d=d.replace(e[0],String.fromCharCode(parseInt("0x"+e[1],16)));b[d]=a.post[g]}a.post=b}return a},swfuploadPreload:function(){var a;if("function"===typeof this.settings.swfupload_preload_handler)a=
this.settings.swfupload_preload_handler.call(this);else if(void 0!=this.settings.swfupload_preload_handler)throw"upload_start_handler must be a function";void 0===a&&(a=!0);return!!a},flashReady:function(){this.cleanUp()?this.queueEvent("swfupload_loaded_handler"):this.debug("Flash called back ready but the flash movie can't be found.")},cleanUp:function(){var a,c=this.getMovieElement();try{if(c&&"unknown"===typeof c.CallFunction)for(a in this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)"),
c)try{"function"===typeof c[a]&&(c[a]=null)}catch(b){}}catch(d){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}};return c},mouseClick:function(){this.queueEvent("mouse_click_handler")},mouseOver:function(){this.queueEvent("mouse_over_handler")},mouseOut:function(){this.queueEvent("mouse_out_handler")},fileDialogStart:function(){this.queueEvent("file_dialog_start_handler")},fileQueued:function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)},
fileQueueError:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])},fileDialogComplete:function(a,c,b){this.queueEvent("file_dialog_complete_handler",[a,c,b])},uploadResizeStart:function(a,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_resize_start_handler",[a,c.width,c.height,c.encoding,c.quality])},uploadStart:function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)},returnUploadStart:function(a){var c;
if("function"===typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),c=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===c&&(c=!0);this.callFlash("ReturnUploadStart",[!!c])},uploadProgress:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])},uploadError:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",
[a,c,b])},uploadSuccess:function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,c,b])},uploadComplete:function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)},debug:function(a){this.queueEvent("debug_handler",a)},debugMessage:function(a){var c,b;if(this.settings.debug){c=[];if("object"===typeof a&&"string"===typeof a.name&&"string"===typeof a.message){for(b in a)a.hasOwnProperty(b)&&c.push(b+": "+a[b]);a=c.join("\n")||"";c=a.split("\n");
a="EXCEPTION: "+c.join("\nEXCEPTION: ")}h.Console.writeLine(a)}}});h.Console={};h.Console.writeLine=function(a){var c,b;try{c=document.getElementById("SWFUpload_Console"),c||(b=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(b),c=document.createElement("textarea"),c.id="SWFUpload_Console",c.style.fontFamily="monospace",c.setAttribute("wrap","off"),c.wrap="off",c.style.overflow="auto",c.style.width="700px",c.style.height="350px",c.style.margin="5px",b.appendChild(c)),
c.value+=a+"\n",c.scrollTop=c.scrollHeight-c.clientHeight}catch(d){alert("Exception: "+d.name+" Message: "+d.message)}}}.call(FOCUS,SWFUpload);
swfobject=function(){function h(){if(!G){try{var a=r.getElementsByTagName("body")[0].appendChild(r.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}G=!0;for(var a=I.length,c=0;c<a;c++)I[c]()}}function k(a){G?a():I[I.length]=a}function p(a){if(typeof y.addEventListener!=t)y.addEventListener("load",a,!1);else if(typeof r.addEventListener!=t)r.addEventListener("load",a,!1);else if(typeof y.attachEvent!=t)s(y,"onload",a);else if("function"==typeof y.onload){var b=y.onload;y.onload=function(){b();
a()}}else y.onload=a}function d(){var a=r.getElementsByTagName("body")[0],b=r.createElement(v);b.setAttribute("type",D);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=t){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),q.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;l()})()}else l()}function l(){var d=u.length;if(0<d)for(var e=0;e<d;e++){var g=u[e].id,h=u[e].callbackFn,
k={success:!1,id:g};if(0<q.pv[0]){var l=n(g);if(l)if(w(u[e].swfVersion)&&!(q.wk&&312>q.wk))F(g,!0),h&&(k.success=!0,k.ref=a(g),h(k));else if(u[e].expressInstall&&c()){k={};k.data=u[e].expressInstall;k.width=l.getAttribute("width")||"0";k.height=l.getAttribute("height")||"0";l.getAttribute("class")&&(k.styleclass=l.getAttribute("class"));l.getAttribute("align")&&(k.align=l.getAttribute("align"));for(var s={},l=l.getElementsByTagName("param"),m=l.length,p=0;p<m;p++)"movie"!=l[p].getAttribute("name").toLowerCase()&&
(s[l[p].getAttribute("name")]=l[p].getAttribute("value"));b(k,s,g,h)}else f(l),h&&h(k)}else if(F(g,!0),h){if((g=a(g))&&typeof g.SetVariable!=t)k.success=!0,k.ref=g;h(k)}}}function a(a){var b=null;if((a=n(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=t?b=a:(a=a.getElementsByTagName(v)[0])&&(b=a);return b}function c(){return!K&&w("6.0.65")&&(q.win||q.mac)&&!(q.wk&&312>q.wk)}function b(a,b,c,d){K=!0;M=d||null;P={success:!1,id:c};var f=n(c);if(f){"OBJECT"==f.nodeName?(A=g(f),L=null):(A=f,L=c);a.id=
H;if(typeof a.width==t||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==t||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";r.title=r.title.slice(0,47)+" - Flash Player Installation";d=q.ie&&q.win?"ActiveX":"PlugIn";d="MMredirectURL="+y.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+r.title;b.flashvars=typeof b.flashvars!=t?b.flashvars+("&"+d):d;q.ie&&(q.win&&4!=f.readyState)&&(d=r.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",
c),f.parentNode.insertBefore(d,f),f.style.display="none",function(){4==f.readyState?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}());e(a,b,c)}}function f(a){if(q.ie&&q.win&&4!=a.readyState){var b=r.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(g(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(g(a),a)}function g(a){var b=r.createElement("div");if(q.win&&
q.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(v)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(1==a[d].nodeType&&"PARAM"==a[d].nodeName)&&8!=a[d].nodeType&&b.appendChild(a[d].cloneNode(!0));return b}function e(a,b,c){var d,e=n(c);if(q.wk&&312>q.wk)return d;if(e)if(typeof a.id==t&&(a.id=c),q.ie&&q.win){var g="",f;for(f in a)a[f]!=Object.prototype[f]&&("data"==f.toLowerCase()?b.movie=a[f]:"styleclass"==f.toLowerCase()?g+=' class="'+a[f]+'"':"classid"!=f.toLowerCase()&&(g+=" "+
f+'="'+a[f]+'"'));f="";for(var h in b)b[h]!=Object.prototype[h]&&(f+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+f+"</object>";J[J.length]=a.id;d=n(a.id)}else{h=r.createElement(v);h.setAttribute("type",D);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(g in b)b[g]!=Object.prototype[g]&&"movie"!=g.toLowerCase()&&
(a=h,f=g,k=b[g],c=r.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function m(a){var b=n(a);b&&"OBJECT"==b.nodeName&&(q.ie&&q.win?(b.style.display="none",function(){if(4==b.readyState){var c=n(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function n(a){var b=null;try{b=r.getElementById(a)}catch(c){}return b}
function s(a,b,c){a.attachEvent(b,c);B[B.length]=[a,b,c]}function w(a){var b=q.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function x(a,b,c,d){if(!q.ie||!q.mac){var e=r.getElementsByTagName("head")[0];if(e){c=c&&"string"==typeof c?c:"screen";d&&(N=C=null);if(!C||N!=c)d=r.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),C=e.appendChild(d),
q.ie&&(q.win&&typeof r.styleSheets!=t&&0<r.styleSheets.length)&&(C=r.styleSheets[r.styleSheets.length-1]),N=c;q.ie&&q.win?C&&typeof C.addRule==v&&C.addRule(a,b):C&&typeof r.createTextNode!=t&&C.appendChild(r.createTextNode(a+" {"+b+"}"))}}}function F(a,b){if(Q){var c=b?"visible":"hidden";G&&n(a)?n(a).style.visibility=c:x("#"+a,"visibility:"+c)}}function z(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=t?encodeURIComponent(a):a}var t="undefined",v="object",D="application/x-shockwave-flash",
H="SWFObjectExprInst",y=window,r=document,E=navigator,O=!1,I=[function(){O?d():l()}],u=[],J=[],B=[],A,L,M,P,G=!1,K=!1,C,N,Q=!0,q=function(){var a=typeof r.getElementById!=t&&typeof r.getElementsByTagName!=t&&typeof r.createElement!=t,b=E.userAgent.toLowerCase(),c=E.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",g=[0,0,0],f=null;if(typeof E.plugins!=t&&typeof E.plugins["Shockwave Flash"]==
v){if((f=E.plugins["Shockwave Flash"].description)&&!(typeof E.mimeTypes!=t&&E.mimeTypes[D]&&!E.mimeTypes[D].enabledPlugin))O=!0,e=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),g[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof y.ActiveXObject!=t)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(f=h.GetVariable("$version")))e=!0,f=f.split(" ")[1].split(","),
g=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}catch(k){}return{w3:a,pv:g,wk:b,ie:e,win:d,mac:c}}();(function(){q.w3&&((typeof r.readyState!=t&&"complete"==r.readyState||typeof r.readyState==t&&(r.getElementsByTagName("body")[0]||r.body))&&h(),G||(typeof r.addEventListener!=t&&r.addEventListener("DOMContentLoaded",h,!1),q.ie&&q.win&&(r.attachEvent("onreadystatechange",function(){"complete"==r.readyState&&(r.detachEvent("onreadystatechange",arguments.callee),h())}),y==top&&function(){if(!G){try{r.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}h()}}()),q.wk&&function(){G||(/loaded|complete/.test(r.readyState)?h():setTimeout(arguments.callee,0))}(),p(h)))})();(function(){q.ie&&q.win&&window.attachEvent("onunload",function(){for(var a=B.length,b=0;b<a;b++)B[b][0].detachEvent(B[b][1],B[b][2]);a=J.length;for(b=0;b<a;b++)m(J[b]);for(var c in q)q[c]=null;q=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(q.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;u[u.length]=e;F(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(b){if(q.w3)return a(b)},embedSWF:function(a,d,f,g,h,l,s,m,n,p){var r={success:!1,id:d};q.w3&&!(q.wk&&312>q.wk)&&a&&d&&f&&g&&h?(F(d,!1),k(function(){f+="";g+="";var k={};if(n&&typeof n===v)for(var q in n)k[q]=n[q];k.data=a;k.width=f;k.height=g;q={};if(m&&typeof m===v)for(var u in m)q[u]=m[u];if(s&&typeof s===v)for(var x in s)q.flashvars=typeof q.flashvars!=t?q.flashvars+("&"+x+"="+s[x]):x+"="+s[x];if(w(h))u=e(k,q,d),k.id==
d&&F(d,!0),r.success=!0,r.ref=u;else{if(l&&c()){k.data=l;b(k,q,d,p);return}F(d,!0)}p&&p(r)})):p&&p(r)},switchOffAutoHideShow:function(){Q=!1},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(a,b,c){if(q.w3)return e(a,b,c)},showExpressInstall:function(a,d,e,f){q.w3&&c()&&b(a,d,e,f)},removeSWF:function(a){q.w3&&m(a)},createCSS:function(a,b,c,d){q.w3&&x(a,b,c,d)},addDomLoadEvent:k,addLoadEvent:p,getQueryParamValue:function(a){var b=
r.location.search||r.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return z(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return z(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var a=n(H);a&&A&&(a.parentNode.replaceChild(A,a),L&&(F(L,!0),q.ie&&q.win&&(A.style.display="block")),M&&M(P));K=!1}}}}();swfobject.addDomLoadEvent(function(){"function"===typeof SWFUpload.onload&&SWFUpload.onload.call(window)});
void function(h,k,p){var d=this.util;h=this.widget;var l=h.Upload,a=this.BASEPATH,c=this.PATH_FLASH,b=this.PATH_FLASH_FP9,f=l.MODE,g=l.CURSOR,e=l.CSS,m={flash_url:"flashURL",flash9_url:"flash9URL",upload_url:"uploadURL",file_post_name:"filePostName",post_params:"postParams",file_types:"fileTypes",file_types_description:"fileTypesDescription",file_upload_limit:"uploadLimit",file_size_limit:"sizeLimit",file_queue_limit:"queueLimit",button_placeholder_id:"placeholder",swfupload_loaded_handler:"events.ready",
swfupload_load_failed_handler:"events.fail",file_dialog_start_handler:"events.dialogStart",file_queued_handler:"events.queued",file_queue_error_handler:"events.queueError",file_dialog_complete_handler:"events.dialogComplete",upload_start_handler:"events.uploadStart",upload_progress_handler:"events.uploadProgress",upload_error_handler:"events.uploadError",upload_success_handler:"events.uploadSuccess",upload_complete_handler:"events.uploadComplete",debug:"debug",button_width:"button.width",button_height:"button.height",
button_text:"button.text"},n=function(a){a=(a||"").split(/\./);for(var b=this,c=!1,d;d=a.shift();)if(d in b)c=!0,b=b[d];else{c=!1;break}return{has:c,value:c?b:null}};h.Upload_Flash=function(d){this.constructor=arguments.callee;this.mode=f.FLASH;this.cfg={};this.elems={};this._={flash_cfg:{flash_url:c||a+"widget/upload/flash/swfupload.swf",flash9_url:b||a+"wigdet/upload/flash/swfupload_fp9.swf",debug:!1,file_upload_limit:-1,button_width:650,button_height:200,button_cursor:g.POINTER,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT},
status:l.TURNING.ON};this.set(d);this.init();this.instance=new SWFUpload(this._.flash_cfg)};h.Upload_Flash.prototype=new h.UploadBase;d.extend(!0,h.Upload_Flash.prototype,{init:function(){this.elems.holder=k.createElement("div");this.elems.flashWrap=k.createElement("div");this.elems.flashHolder=k.createElement("span");var a=this.elems.flashHolder.id="FOCUS_UPLOAD_FlashHolder_"+d.random(0,1E3),b=d.query?d.query(this._.flash_cfg.button_placeholder_id):k.getElementById(this._.flash_cfg.button_placeholder_id.replace(/^#/,
""));"length"in b&&(b=b[0]);b&&(b.parentNode.insertBefore(this.elems.holder,b),b.parentNode.removeChild(b),this.elems.holder.appendChild(this.elems.flashWrap),this.elems.flashWrap.appendChild(this.elems.flashHolder));this.__setStyle("flash",this.elems.holder,this.elems.flashWrap,this._.flash_cfg.button_text);this._.flash_cfg.button_placeholder_id=a;this._.flash_cfg.button_text=""},set:function(a){d.extend(!0,this.cfg,a);this.__setFlashCfg(this.cfg)},__setFlashCfg:function(a){var b,c;for(c in m)b=
n.call(a,m[c]),b.has&&(this._.flash_cfg[c]=b.value);this._.flash_cfg.button_action=SWFUpload.BUTTON_ACTION[a.multiple?"SELECT_FILES":"SELECT_FILE"];this.isReady&&(this.multiple(this.cfg.multiple),this.setFileTypes(this.cfg.fileTypes),this.setFileSizeLimit(this.cfg.sizeLimit),this.setUploadURL(this.cfg.uploadURL),this.setFilePostName(this.cfg.filePostName),this.setFileQueueLimit(this.cfg.queueLimit))},__setStyle:function(a,b,c,f){b.className=e.WRAP;c.className=e.FLASH;a=b.getElementsByTagName("label");
a.length&&b.removeChild(a[0]);a=k.createElement("label");a.className=e.TEXT;a.innerHTML=f;b.insertBefore(a,c);d.event.bind(b,"mouseover",function(a){a.cancelBubble=!0;a.returnValue=!1;d.addClass(b,e.HOVER)});d.event.bind(b,"mouseout",function(a){a.cancelBubble=!0;a.returnValue=!1;d.removeClass(b,e.HOVER)})},startUpload:function(){this.ready(function(){this.instance.startUpload()})},cancelUpload:function(a){this.ready(function(){if("function"===d.type(a))this.one("uploadError",a);this.instance.cancelUpload(0,
!0)})},stopUpload:function(a){if("function"===d.type(a))this.one("uploadError",a);this.instance.stopUpload()},getQueueFile:function(a){return new l.File4Flash(this.instance.getQueueFile(a))},setPostParam:function(a){this.ready(function(){this.instance.setPostParam(a)})},addPostParam:function(a,b){this.ready(function(){this.instance.addPostParam(a,b)})},removePostParam:function(a){this.ready(function(){this.instance.removePostParam(a)})},setUploadURL:function(a){this.ready(function(){this.cfg.uploadURL=
a;this.instance.setUploadURL(a)})},setFilePostName:function(a){this.ready(function(){this.instance.setFilePostName(a)})},setFileTypes:function(a,b){this.ready(function(){this.cfg.fileTypes=d.convert2MimeTypes(a);this.instance.setFileTypes(d.convertMimeTypes(a),b||this.cfg.fileTypesDescription)})},setFileSizeLimit:function(a){this.ready(function(){this.cfg.sizeLimit=limt;this.instance.setFileSizeLimit(a)})},setFileQueueLimit:function(a){this.ready(function(){this.cfg.queueLimit=a;this.instance.setFileQueueLimit(a)})},
__translateStatus:function(a){var b=d.type(a);"string"===b?(a=d.trim(a),a=a.length?!!l.TURNING[a.toUpperCase()]:l.TURNING.OFF):a="undefined"===b?!_this._.status:!!a;return a},turn:function(a){a=this.__translateStatus(a);this._.status=a;d[a?"removeClass":"addClass"](this.elems.holder,e.DISABLED);this.ready(function(){this.instance.setButtonDisabled(!a);this.instance.setButtonCursor(g[a?"POINTER":"DEFAULT"])})},multiple:function(a){this.ready(function(){this.instance.setButtonAction(SWFUpload.BUTTON_ACTION[a?
"SELECT_FILES":"SELECT_FILE"])})}})}.call(FOCUS,this,document);
