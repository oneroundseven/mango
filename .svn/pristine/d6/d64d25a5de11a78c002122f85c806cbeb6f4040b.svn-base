/**
* upload
* @version 0.6.7
* @namespace FOCUS.widget
* @author lvxiang
*/
void function(a,d,g){a.FOCUS||(a.FOCUS={});FOCUS.namespace=function(){for(var e=[].slice.call(arguments),d,c,b,f=[];e.length;){d=e.shift().split(/\./);for(b=a;d.length;)c=d.shift(),b[c]||(b[c]={}),b=b[c];f.push(b)}return 1<f.length?f:f[0]};FOCUS.BASEPATH=a.FOCUS_BASEPATH||function(e){for(var d=a.location,c=/^(\w+\:\/{2,3}.+?)\//.exec(d.href)[1],b=/(^\/?|.*?\/)FOCUS\/[^?#]+\.js(?:[?#].*)?$/,f=/^\w+\:\/\//,y=/^\//,k=/^.*\//,n,p,g=0,C=e.length;g<C;g++)if(p=e[g].src,f.test(p)||(p=y.test(p)?c+p:k.exec(d.href)[0]+
p),p=b.exec(p)){n=p[1];break}n?(n=n.replace(RegExp(d.protocol+"\\/\\/"+d.host,"i"),""),n=d.protocol+"//"+d.host+n+"FOCUS/"):n=k.exec(d.href)[0];return n}(d.getElementsByTagName("script"))}.call(this,this,this.document);
void function(a,d,g){FOCUS.namespace("FOCUS.util");FOCUS.util.type=function(c){var b,f=/\{\s*\[native\s*code\]\s*\}/i;null===c?b="null":"undefined"===typeof c?b="undefined":(b=Object.prototype.toString.call(c).match(/\w+/g)[1].toLowerCase(),"object"===b&&f.test(c+"")&&(b="function"));return b};FOCUS.util.trim=function(c){return(c+"").replace(/^[\s\u00A0]+|[\s\u00A0]+$/g,"")};FOCUS.util.JSON=function(c){var b={};b.stringify=c?c.stringify:function(){return""};b.parse=function(b){var c;if("string"===
FOCUS.util.type(b))try{c=(new Function("return "+b))()}catch(a){c={}}else c=b;return c};return b}.call(this,a.JSON);FOCUS.util.browser=function(c){var b=/chrome\/(\d+\.\d+)/,f=/safari\/(\d+\.\d+)/,d=/version\/(\d+\.\d+)/,k={},e;if(e=/msie\s*(\d+\.\d+)/.exec(c))return k.msie=!0,k.version=e[1],k;if(e=/firefox\/(\d+\.\d+)/.exec(c))return k.mozilla=k.firefox=!0,k.version=e[1],k;if(e=/webkit\/(\d+\.\d+)/.exec(c)){k.webkit=!0;k.version=e[1];if(a.chrome)return k.chrome=!0,k.version=b.exec(c)[1],k;if(e=f.exec(c))k.safari=
!0,k.version=[1];return k}if((e=/opera/.exec(c))&&a.opera)k.opera=!0,k.version=d.exec(c)[1];return k}.call(this,a.navigator.userAgent.toLowerCase());FOCUS.util.flash=function(c,b){var f={has:!1,version:0};if(b.length&&b["Shockwave Flash"])b["Shockwave Flash"].description&&!("undefined"!==typeof c.mimeTypes&&c.mimeTypes["application/x-shockwave-flash"]&&!c.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(f={has:!0,version:/\d+\.\d+/.exec(b["Shockwave Flash"].description)[0]});else if(a.ActiveXObject){var e,
k=/\d+/g;try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(d){}e&&(k.exec(""),f={has:!0,version:e.GetVariable("$version").match(k).join(".")})}return f}.call(this,a.navigator,a.navigator.plugins);FOCUS.util.extend=function(){var c=arguments.callee,b,f;"object"!==FOCUS.util.type(arguments[0])?(b=1,f=!!arguments[0]):(b=0,f=!1);var e=arguments[b]||{};b=[].slice.call(arguments,b+1);for(var k,n;b.length;)if(k=b.shift(),"object"===FOCUS.util.type(k)){var p,h;for(h in k)if(p=k[h],"object"===
FOCUS.util.type(p))if(p==a||p==d||"childNodes"in p&&"nextSibling"in p&&"nodeType"in p){if(f||!(h in e))e[e]=p}else{n=FOCUS.util.type(e[h]);if(!(h in e)||"undefined"===n||"null"===n)e[h]={};"object"===FOCUS.util.type(e[h])&&c(f,e[h],p)}else if(f||!(h in e))e[h]=p}return e};FOCUS.util.console=function(c){var b=!1,f=function(){},a={ON:!0,OFF:!1},f={SWITCH:a,turn:function(c){b=a[c?"ON":"OFF"]},log:f,info:f,warn:f,error:f,debug:f};if(!c)return f;c.debug||(c.debug=c.log);c.error||(c.error=c.warn);return FOCUS.util.extend(!0,
f,{log:function(f){b===a.ON&&c.log(f)},info:function(f){b===a.ON&&c.info(f)},warn:function(f){b===a.ON&&c.warn(f)},error:function(f){b===a.ON&&c.error(f)},debug:function(f){b===a.ON&&c.debug(f)}})}.call(a,a.console);FOCUS.util.indexOf=function(c,b){if(c.indexOf)return c.indexOf(b);for(var f=-1,a=0,e=c.length;a<e;a++)if(c[a]===b){f=a;break}return f};FOCUS.util.unique=function(c){for(var b=[],f=0,a=c.length;f<a;f++)-1===FOCUS.util.indexOf(b,c[f])&&b.push(c[f]);return b};FOCUS.util.random=function(){var c=
{};return function(b,f,a){b=b||0;f="number"===FOCUS.util.type(f)&&!isNaN(f)?f===b?f+10:f:b+10;var e=b+"_"+f;c[e]||(c[e]=[]);c[e].length===f-b&&(c[e]=[],"function"===FOCUS.util.type(a)&&a.call(this));for(var d;;)if(d=b+~~(Math.random()*(f-b)),-1===FOCUS.util.indexOf(c[e],d)){c[e].push(d);break}return d}}.call(this);FOCUS.util.createElement=function(){return function(c){var b={};FOCUS.util.extend(!0,b,c);var f;c=FOCUS.util.extend(!0,{},b);var a=["<",c.el],e=c.el;delete c.el;for(f in c)a.push(" ",f,
'="',c[f],'"');a.push(-1===",meta,base,link,img,input,br,hr,area,sharp,".indexOf(","+e+",")?"></"+e+">":" />");f=a.join("");var n;c=!1;try{n=d.createElement(f)}catch(h){c=!0,n=d.createElement(b.el),delete b.el}if(c)for(var g in b)n[g]=b[g];"input"===n.tagName.toLowerCase()&&(n.type=b.type?b.type:"text");return n}}.call(this);FOCUS.util.event=function(){var c=function(b){return b?function(b,c,f){b.addEventListener(c,f,!1)}:function(b,c,f){b.attachEvent("on"+c,f)}}.call(this,!!a.addEventListener);(function(b){return b?
function(b,c,f){b.removeEventListener(c,f)}:function(b,c,f){b.detachEvent("on"+c,f)}}).call(this,!!a.removeEventListener);var b="FOCUS_EVENTS_"+(new Date).valueOf(),f=function(b,c){for(var f=0,a=c.length;f<a;f++)c[f].handler.apply(this,[b].concat(c[f].params))};return{bind:function(e,d,n){e[b]||(e[b]={});var h=e[b];h[d]||(h[d]=[],c(e,d,function(b){b=b||a.event;f.call(e,b,h[d])}));h[d].push({handler:n,params:[].slice.call(arguments,3)})},remove:function(c,f,a){if(c[b]&&!(c[b]&&!c[b][f]||c[b]&&!c[b][f].length))if(c=
c[b][f],a){f=-1;for(var e=0,d=c.length;e<d;e++)if(c[e].handler===a){f=e;break}a=f;-1!=a&&c.splice(a,1)}}}}.call(this);FOCUS.util.feature_upload=function(c){var b=function(){var b=FOCUS.util.flash,f=b.has;if(b&&b.has&&c.oscpu&&FOCUS.util.browser.firefox&&4<=FOCUS.util.browser.version&&13>=FOCUS.util.browser.version){var a=/windows\s*nt\s*([\d\.]+)/i.exec(c.oscpu);if(a&&(/^6\.0/.test(a[1])||/^6\.1/.test(a[1]))&&/^11\.3/.test(b.version))f=!1}return f}.call(this),f=function(){if(FOCUS.util.browser.firefox&&
3.6>FOCUS.util.browser.version)return!1;var b={},c=d.createElement("input");c.type="file";c.style.cssText="position:absolute; top:-999px; height:-999px;";d.body.appendChild(c);b.file=!!c.files;b.multiple="multiple"in c&&!(FOCUS.util.browser.apple&&6>FOCUS.util.browser.version);d.body.removeChild(c);delete c;if(!a.XMLHttpRequest)return!1;c=new XMLHttpRequest;b.upload=!!c.upload;b.sendAsBinary=!!c.sendAsBinary;b.FormData=!!a.FormData&&!a.FormData.customized;delete c;return b}.call(this),e=function(){var b=
{};b.sameDomain=d.domain===(a.location.host||a.location.hostname);return b}.call(this);return{html5:f,flash:b,iframe:e}}.call(this,a.navigator);FOCUS.util.sizeConvert=function(){var c={KB:1024,MB:1048576,GB:1073741824},b=function(b,c){this.size=b;this.unit=c};b.prototype={toString:function(){return this.size+" "+this.unit},valueOf:function(){return this.size}};var f=/^((?:\d+)(?:\.\d+)?)\s*([A-Za-z]*)$/g,a=/([A-Za-z]+)$/;return{unit2Bytes:function(b){var e=0;a.test(b)?(f.exec(""),(b=f.exec(b))&&(e=
(parseFloat(b[1])||0)*(b[2]?c[b[2].toUpperCase()]:1024))):e=parseInt(b)||0;return e||0},bytes2Unit:function(f,a){var e=0,d=["GB","MB","KB"];a=a||"";if(!a)for(var h=0;h<d.length;h++)if(f>c[d[h]]){a=d[h];break}a&&(e=f/c[a]);return e=new b(e||0,a)}}}.call(this);!a.FormData&&FOCUS.util.feature_upload.html5.sendAsBinary&&(a.FormData=function(c){this.charset=c||"UTF-8";this.reset()},a.FormData.prototype={append:function(c,b){var f="",a=this.EOL,e="--"+this.boundary,d=FOCUS.util.type(b);"object"===d&&(b=
JSON.stringify(b),d="string");f=f+(e+a)+"Content-Disposition: form-data; ";"file"===d?(f+='name="'+this.encode(c)+'"; ',f+='filename="'+this.encode(b.filename||b.name)+'"'+a,f+="Content-Type: "+(b.type?b.type:"application/octet-stream")+a+a,f+=b.getAsBinary()+a):(f+='name="'+this.encode(c)+'"'+a+a,f+=this.encode(b)+a);this.data+=f},getData:function(){return this.data+"--"+this.boundary+"--"+this.EOL},valueOf:function(){return this.getData()},toString:function(){return this.getData()},reset:function(){this.data=
"";this.boundary="---------------------------71"+(new Date).valueOf().toString(16).replace(/^0x/,"");this.EOL="\r\n"},encode:function(c){return FOCUS.util.transformCharset?FOCUS.util.transformCharset(c,this.charset):encodeURI(c)}},a.FormData.customized=!0);var e={"*/*":"*.*","image/*":"*.jpg; *.jpeg; *.jpe; *.png; *.gif","image/png":"*.png","image/jpeg":"*.jpg; *.jpeg; *.jpe","image/jpg":"*.jpg; *.jpeg; *.jpe","image/gif":"*.gif","application/gzip":"*.gz","application/zip":"*.zip","application/vnd.ms-excel":"*.xls",
"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"*.xlsx","application/msword":"*.doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"*.docx","application/vnd.ms-powerpoint":"*.ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"*.pptx","application/mshelp":"*.hlp; *.chm","application/pdf":"*.pdf","application/mp3":"*.mp3","text/html":"*.html; *.htm; *.xhtml","text/javascript":"*.js","text/css":"*.css","text/plain":"*.txt",
"default":"*.*"},h=function(c){var b=["image/*","image/jpg","default"],f={},a;for(a in c)-1===FOCUS.util.indexOf(b,a)&&c[a].replace(/[^\;\u0020]+/g,function(b){f[b]=a});return f}(e);FOCUS.util.convert2MimeTypes=function(c){c=c.split(/[\;\,]\s*/);var b=[],f="";if(c.length){for(var a=/^[^\/]+\/[^\/]+$/,e=0;e<c.length;e++)if(a.test(c[e]))b.push(c[e]);else if(c[e]in h&&"*.*"!==c[e])b.push(h[c[e]]);else{f="*/*";break}f||(f=FOCUS.util.unique(b).join(", "))}else f="*/*";return f};FOCUS.util.convertMimeTypes=
function(c){c=c.split(/[\;\,]\s*/);var b=[],f="";if(c.length){for(var a=/^[^\\\/]+\.[^\\\/]+$/,d=0;d<c.length;d++)if(a.test(c[d]))b.push(c[d]);else if(c[d]in e&&"*/*"!==c[d])b.push(e[c[d]]);else{f="*.*";break}f||(f=FOCUS.util.unique(b).join("; "))}else f="*.*";return f};FOCUS.util.mimeValidation=function(c,b){if(-1!==(c+"").indexOf("*/*"))return!0;b+="";"string"===FOCUS.util.type(c)&&(c=c.split(/[\;\,\s]+/));var f=!1,a=/^([^\/]+)\/([^\/]+)$/,e=a.exec(b),d;if(!e)return!1;for(var h=0;h<c.length;h++)if(d=
a.exec(c[h]),c[h]===b||d[1]===e[1]&&("*"===d[2]||d[2]===e[2])){f=!0;break}return f};FOCUS.util.addClass=function(c,b){var f=FOCUS.util.trim(c.className).split(/\s+/);f.push(b);c.className=FOCUS.util.unique(f).join(" ")};FOCUS.util.removeClass=function(c,b){var f=FOCUS.util.unique(FOCUS.util.trim(c.className).split(/\s+/)),a=FOCUS.util.indexOf(f,b);-1!==a&&f.splice(a,1);c.className=f.join(" ")}}.call(this,this,this.document);
void function(a,d,g){FOCUS.namespace("FOCUS.widget");var e=function(){},h=function(){var b=FOCUS.util.feature_upload;return{flash:b.flash,html5:b.html5&&b.html5.upload&&(b.html5.sendAsBinary||b.html5.FormData),iframe:!0}}.call(this);FOCUS.widget.Upload=function(b){this.cfg={priority:FOCUS.widget.Upload.PRIORITY.DEFAULT,events:{ready:e,loadFailed:e,dialogStart:e,dialogComplete:e,queued:e,queueError:e,uploadStart:e,uploadProgress:e,uploadSuccess:e,uploadError:e,uploadComplete:e},button:{text:"Upload"},
multiple:!0,sizeLimit:-1,uploadLimit:-1,queueLimit:-1,fileTypes:FOCUS.widget.Upload.MIME_TYPE.ALL,uploadURL:"",filePostName:"",placeholder:"",debug:!1,plugins:"UploadEvents,AutoDisabled,Ready"};this.set(b);FOCUS.widget.Upload.plugins.UploadEvents&&(this.uploadEvents=new FOCUS.widget.Upload.plugins.UploadEvents(this.cfg.events),this.set({events:this.uploadEvents.events}));this._={};this.init();return this.instance};FOCUS.widget.Upload.prototype={init:function(){for(var b=this,a=this.cfg.priority,e,
d=0;d<a.length;d++)if(h[a[d]]){e=a[d];break}a={html5:"Upload_HTML5",flash:"Upload_Flash",iframe:"Upload_Iframe"};if(e){if(e===FOCUS.widget.Upload.MODE.FLASH){c();for(var n in this.cfg.events)this.cfg.events[n]=function(b,c){var a=FOCUS.widget.Upload.File;return function(c){c&&c.id?b.apply(this,[new a(c)].concat([].slice.call(arguments,1))):b.apply(this,[].slice.call(arguments,0))}}.call(this,this.cfg.events[n],n);this.cfg.fileTypes=FOCUS.util.convertMimeTypes(this.cfg.fileTypes);this.cfg.placeholder=
this.cfg.placeholder.replace(/^#/,"");this.cfg.events.ready=function(c){return function(){setTimeout(function(){c.call(b.instance,e)},25)}}(this.cfg.events.ready)}else this.cfg.fileTypes=FOCUS.util.convert2MimeTypes(this.cfg.fileTypes);this.instance=new FOCUS.widget[a[e]](this.cfg);e!==FOCUS.widget.Upload.MODE.FLASH&&setTimeout(function(){b.cfg.events.ready.call(b.instance,e)},25);n=FOCUS.widget.Upload.plugins;n.UploadEvents&&(this.uploadEvents.bindThisObj(this.instance),"on,one,off,fire".replace(/(\w+)/g,
function(c){b.instance[c]=function(){b.uploadEvents[c].apply(b.uploadEvents,arguments);return b.instance}}));for(var g in n)g.replace(/([\$\^\[\]\\/\,\?\:\|\{\}\!\(\)\*\-\+])/g,"\\$1"),"UploadEvents"!==g&&RegExp("(^|,)"+g+"(,|$)").exec(this.cfg.plugins)&&n[g].call(this.instance,this.instance.mode)}else throw"not support this constructor.";},set:function(b){var c=this.cfg.plugins;b.plugins&&"string"===FOCUS.util.type(b.plugins)&&(c+=","+b.plugins,c=FOCUS.util.unique(c.split(/[,;\s]+/)).join(","));
FOCUS.util.extend(!0,this.cfg,b);this.cfg.plugins=c}};var c=function(b){return function(){b.File=function(c){this.data=c;this.id=c.id;this.size=c.size;this.status=c.filestatus;this.suffix=c.type.replace(/^\./,"");this.type=b.MIME_TYPE[this.suffix.toUpperCase()];this.fullname=c.name;c=this.fullname.split(/\./);1<c.length&&c.pop();this.name=c.join(".")}}}.call(this,FOCUS.widget.Upload)}.call(this,this,this.document);
void function(a,d,g){FOCUS.namespace("FOCUS.widget.Upload");var e=FOCUS.widget.Upload;e.MODE={HTML5:"html5",FLASH:"flash",IFRAME:"iframe",DEFAULT:"html5"};e.PRIORITY={DEFAULT:[e.MODE.HTML5,e.MODE.FLASH,e.MODE.IFRAME]};e.MIME_TYPE={ALL:"*/*",IMAGE:"image/*",JPG:"image/jpeg",JPEG:"image/jpeg",PNG:"image/png",GIF:"image/gif",PDF:"application/pdf",DOC:"application/msword",DOCX:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",XLS:"application/vnd.ms-excel",XLSX:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
PPT:"application/vnd.ms-powerpoint",PPTX:"application/vnd.openxmlformats-officedocument.presentationml.presentation",TXT:"text/plain",UNKNOWN:"application/octet-stream"};e.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130,CHAIN_ERROR:-140};e.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,
UPLOAD_STOPPED:-290,RESIZE:-300,TIMEOUT:-310};e.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5,NEW:-6};e.UPLOAD_TYPE={SINGLE:1,MULTI:2};e.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};e.CURSOR={POINTER:-2,DEFAULT:-1};e.CSS={WRAP:"FOCUS_UPLOAD_wrap",SELECTOR:"FOCUS_UPLOAD_selector",FLASH:"FOCUS_UPLOAD_flashWrap",TEXT:"FOCUS_UPLOAD_text",DISABLED:"FOCUS_UPLOAD_wrap_disabled",HOVER:"FOCUS_UPLOAD_wrap_hover"};e.CHARSET={UTF8:"UTF-8",
GBK:"GBK",GB2312:"GB2312",BIG5:"BIG5",DEFAULT:"UTF-8"};e.TURNING={ON:!0,OFF:!1};var h=function(c,b){b=b||{};var a=c.split(/\./);b.suffix=1<a.length?a.pop():"";b.name=a.join(".");return b};e.File=function(c){var b={data:c};b.id="FOCUS_UPLOAD_"+(FOCUS.util.random(0,1E6)+~~((new Date).valueOf()/1E7)).toString(16).toUpperCase();if(c.tagName&&"input"===c.tagName.toLowerCase()&&"file"===c.type){if(c=/[^\/\\]+$/.exec(c.value))b.fullname=c[0],h(b.fullname,b)}else b.size=c.filesize||c.size||0,b.type=c.type||
"",b.fullname=c.filename||c.name||"",h(b.fullname,b);b.type=b.suffix?b.suffix.toUpperCase()in e.MIME_TYPE?e.MIME_TYPE[b.suffix.toUpperCase()]:"":"";b.status=e.FILE_STATUS.NEW;return b}}.call(this,this,this.document);
void function(a,d){FOCUS.namespace("FOCUS.widget");var g=function(){};FOCUS.widget.UploadBase=function(){};FOCUS.widget.UploadBase.prototype={init:g,set:function(a){this.cfg=FOCUS.util.extend(!0,this.cfg,a)},debug:function(a){FOCUS.util.log.turn(!!a)},startUpload:g,getFile:g,cancelUpload:function(a){var d=this.getQueueFile();if(d){d.status=FOCUS.widget.Upload.FILE_STATUS.CANCELLED;if("function"===FOCUS.util.type(a))this.one("uploadError",a);this.cfg.events.uploadError.call(this,d,FOCUS.widget.Upload.UPLOAD_ERROR.FILE_CANCELLED,
"file cancelled.");this.elems.poster&&this.elems.poster.abort()}},stopUpload:function(a){var d=this.getQueueFile();if(d){d.status=FOCUS.widget.Upload.FILE_STATUS.QUEUED;if("function"===FOCUS.util.type(a))this.one("uploadError",a);this.cfg.events.uploadError.call(this,d,FOCUS.widget.Upload.UPLOAD_ERROR.UPLOAD_STOPPED,"upload stopped.");this.elems.poster&&this.elems.poster.abort();this._.queue.unshift(d)}},getQueueFile:function(a){a=a||0;var d=FOCUS.util.type(a),c=this._.queue,b=null;if("number"===
d)a<=c.length-1&&(b=c[a]);else if("string"===d)for(d=0;d<c.length;d++)if(c[d].id===a){b=c[d];break}return b},setPostParam:function(a){this.cfg.postParams||(this.cfg.postParams={});FOCUS.util.extend(!0,this.cfg.postParams,a)},addPostParam:function(a,d){this.cfg.postParams||(this.cfg.postParams={});this.cfg.postParams[a]=d},removePostParam:function(a){!this.cfg.postParams||!a?this.cfg.postParams={}:a in this.cfg.postParams&&delete this.cfg.postParams[a]},setUploadURL:function(a){this.cfg.uploadURL=
a+""},setFilePostName:function(a){this.cfg.filePostName=a+""},setFileTypes:function(a){switch(this.mode){case FOCUS.widget.Upload.MODE.IFRAME:case FOCUS.widget.Upload.MODE.HTML5:a=FOCUS.util.convert2MimeTypes(a);this.elems.selector.accept=a;break;case FOCUS.widget.Upload.MODE.FLASH:a=FOCUS.util.convertMimeTypes(a)}this.cfg.fileTypes=a},setFileSizeLimit:function(a){this.cfg.sizeLimit=a},setFileQueueLimit:function(a){this.cfg.queueLimit=a},__setStyle:function(a,h,c,b){var f=FOCUS.util,g=FOCUS.widget.Upload.CSS;
h.className=g.WRAP;f.browser.firefox&&(c.size=6);c.className=g.SELECTOR;a=h.getElementsByTagName("label");a.length&&h.removeChild(a[0]);a=d.createElement("label");a.className=g.TEXT;a.innerHTML=b;h.insertBefore(a,c);f.event.bind(h,"mouseover",function(a){a.cancelBubble=!0;a.returnValue=!1;f.addClass(h,g.HOVER)});FOCUS.util.event.bind(h,"mouseout",function(a){a.cancelBubble=!0;a.returnValue=!1;f.removeClass(h,g.HOVER)})},__translateStatus:function(a){var d=FOCUS.util.type(a);"string"===d?(a=FOCUS.util.trim(a),
a=a.length?!!FOCUS.widget.Upload.TURNING[a.toUpperCase()]:FOCUS.widget.Upload.TURNING.OFF):a="undefined"===d?!this._.status:!!a;return a},turn:function(a){a=this.__translateStatus(a);var d=FOCUS.util,c=FOCUS.widget.Upload.CSS;a!==this._.status&&(this.elems.selector.disabled=!a,this._.status=a,d[a?"removeClass":"addClass"](this.elems.holder,c.DISABLED))},multiple:function(a){this.elems.selector.multiple=!!a},queue:function(){},dequeue:function(a){if(this.mode===FOCUS.widget.Upload.MODE.IFRAME||this.mode===
FOCUS.widget.Upload.MODE.HTML5)switch(FOCUS.util.type(a)){case "string":for(var d=0;d<this._.queue.length;d++)if(this._.queue[d].id===a){a=d;break}case "number":this._.queue.splice(a,1);break;case "boolean":a?this._.queue.splice(0):this._.queue.splice(0,1)}else if(this.mode===FOCUS.widget.Upload.MODE.FLASH)switch(FOCUS.util.type(a)){case "string":case "number":this.instance.cancelUpload(a,!1);break;case "undefined":a=!1;case "boolean":if(a)for(;a=this.instance.getQueueFile();)this.instance.cancelUpload(a.file_id,
!1);else this.instance.cancelUpload(0,!1)}}}}.call(this,this,this.document);
void function(a,d){var g=FOCUS.namespace("FOCUS.widget.Upload.plugins"),e=function(a,b){this.type=a;this.listeners=[];this._={thisObj:b}};e.prototype={__search:function(a,b){for(var f=-1,d=b||0;d<this.listeners.length;d++)if(this.listeners[d].handle===a){f=d;break}return f},add:function(a,b){var f=a.handles,d=a.thisObj||null,e=a.once||!1;b=[].slice.call(arguments,1);"function"===FOCUS.util.type(f)&&(f=[f]);if("array"===FOCUS.util.type(f))for(var g=0;g<f.length;g++)"function"===FOCUS.util.type(f[g])&&
this.listeners.push({handle:f[g],thisObj:d,once:!!e,args:b})},one:function(a,b){"object"===FOCUS.util.type(a)&&(a.once=!0,this.add(a,[].slice.call(arguments,1)))},remove:function(a){if(a){"function"===FOCUS.util.type(a)&&(a=[a]);for(var b,f=0;f<a.length;f++)"function"===FOCUS.util.type(a[f])&&-1!==(b=this.__search(a[f]))&&this.listeners.splice(b,1)}else this.listeners=[]},exec:function(a){for(var b,f=[],d=0;d<this.listeners.length;d++)b=this.listeners[d],b.once&&f.push(b.handle),b.handle.apply(b.thisObj||
this._.thisObj||this,[].concat.call(b.args,[].slice.call(arguments)));this.remove(f)},bindThisObj:function(a){this._.thisObj=a}};var h=function(a,b){this._={events:{},thisObj:b};this.events={};for(var f in a)this.on(f,a[f]),this.events[f]=function(a){var b=this;return"uploadError"===a?function(c,f,d){switch(f){case FOCUS.widget.Upload.UPLOAD_ERROR.FILE_CANCELLED:b.fire.apply(b,["cancel",c,FOCUS.widget.Upload.UPLOAD_ERROR.FILE_CANCELLED,"file cancelled."]);break;case FOCUS.widget.Upload.UPLOAD_ERROR.UPLOAD_STOPPED:b.fire.apply(b,
["stop",c,FOCUS.widget.Upload.UPLOAD_ERROR.UPLOAD_STOPPED,"upload stopped."]);break;default:b.fire.apply(b,[a].concat([].slice.call(arguments)))}}:function(){b.fire.apply(b,[a].concat([].slice.call(arguments)))}}.call(this,f)};h.prototype={__initEvent:function(a,b,f){a in this._.events||(this._.events[a]=new e(a,this._.thisObj));return{handles:b,thisObj:f}},on:function(a,b,f,d){var e=this.__initEvent(a,b,f);this._.events[a].add.apply(this._.events[a],[e].concat([].slice.call(arguments,3)))},off:function(a,
b){a in this._.events&&this._.events[a].remove(b)},one:function(a,b,f,d){var e=this.__initEvent(a,b,f);this._.events[a].one.apply(this._.events[a],[e].concat([].slice.call(arguments,3)))},fire:function(a,b){a in this._.events&&this._.events[a].exec.apply(this._.events[a],[].slice.call(arguments,1))},bindThisObj:function(a){this._.thisObj=a;for(var b in this._.events)this._.events[b].bindThisObj(a)}};g.UploadEvents=h}.call(this,window,window.document);
void function(a){FOCUS.namespace("FOCUS.widget.Upload.plugins").AutoDisabled=function(a){this.on("uploadStart",function(){this.turn("off")}).on("uploadComplete",function(){this.turn("on")})}}.call(this);void function(){var a=FOCUS.util;FOCUS.widget.Upload.plugins.Ready=function(d){var g=!1,e=this,h=[],c=function(){for(;h.length;)h.shift().call(e,d)};this.on("ready",function(){this.isReady=g=!0;c()});this.ready=function(b){"function"===a.type(b)&&h.push(b);g&&c()}}}.call(this);
void function(a,d,g){a=FOCUS.namespace("FOCUS.widget.io.iframe");var e=FOCUS.util.createElement;d=function(){this.elems={}};d.prototype={_:{text:function(a,c){return e({el:"textarea",name:a,value:c+""})},radio:function(a,c,b){return e({el:"input",type:"radio",name:a,value:c,checked:!!b})},checkbox:function(a,c,b){return e({el:"input",type:"checkbox",name:a,value:c,checked:!!b})},file:function(a,c){if(a)return c&&c.name&&(a.name=c.name),a;var b={el:"input",type:"file"};FOCUS.util.extend(!0,b,c);return e(b)},
clone:function(a){return a.cloneNode(!0)}},append:function(a,c){var b=FOCUS.util.type(c),f;"string"!==b&&"file"===c.type?f=this._.file(c,{name:a}):"string"===b&&(f=this._.text(a,c+""));this.elems[a]=f}};a.IO_FormData=d}.call(this,window,document);
void function(a,d,g){g=FOCUS.namespace("FOCUS.widget.io.iframe");var e=function(){},h=FOCUS.util.createElement,c=function(a){this.cfg={events:{load:e,error:e},timeout:1E5,charset:"UTF-8"};FOCUS.util.extend(!0,this.cfg,a);this.elems={};this._={};this.init()};c.prototype={init:function(){var b=this;this.elems.io=h({el:"iframe",name:"FOCUS_UPLOAD_IO_"+FOCUS.util.random(0,1E3),src:FOCUS.util.browser.msie?"javascript:document.open();"+(d.domain===a.location.hostname?"":"document.domain='"+d.domain+"';")+
"void(0)":"about:blank"});this.elems.io.style.cssText="position:absolute; width:1px; height:1px; top: -9999px; left:-9999px;";d.body.appendChild(b.elems.io);setTimeout(function(){b.elems.win=b.elems.io.contentWindow;b.elems.doc=b.elems.io.contentWindow.document},25);this._.timer=-1;this._.handle={load:function(){if(b._.submited){clearTimeout(b._.timer);var a=b._.handle.getData(b.elems.io);"undefined"===FOCUS.util.type(a)?b.cfg.events.error.call(this,"IO_ERROR"):b.cfg.events.load.call(this,a);b._.submited=
!1;setTimeout(function(){b._deleteForm()},25)}},error:function(){b.cfg.events.error.call(this);b._.submited=!1},getData:function(a){var b;try{b=a.contentWindow.document.body.innerHTML.replace(/(^|)\<\/?pre[^\>]*\>(|$)/gi,"")}catch(c){}return b}};this.elems.io.attachEvent?this.elems.io.attachEvent("onload",this._.handle.load):this.elems.io.onload=this._.handle.load},open:function(a,c){this._.openCfg={method:"GET"===a.toUpperCase()?"GET":"POST",action:c}},send:function(a,c){var e=this;setTimeout(function(){var g=
{el:"form",name:"FOCUS_UPLOAD_FORM_"+FOCUS.util.random(0,1E3),method:e._.openCfg.method,action:e._.openCfg.action||""};g.target=e.elems.io.name;var n=[],p=!1,t,C;for(C in a.elems)t=a.elems[C],"file"===t.type&&(p=!0),n.push(t);g.enctype=p?"multipart/form-data":"application/x-www-form-urlencoded";e._deleteForm();var x=e.elems.__submit_form=h(g);x.style.cssText="position:absolute; width:1px; height:1px; top: -9999px; left:-9999px;";for(d.body.appendChild(x);n.length;)x.appendChild(n.shift());c=c||e.cfg.charset||
"UTF-8";var F;FOCUS.util.browser.msie&&(F=d.charset);FOCUS.util.browser.msie?d.charset=c:x.acceptCharset=c;setTimeout(function(){e._.submited=!0;x.submit();setTimeout(function(){FOCUS.util.browser.msie&&(d.charset=F)},1)},25)},100)},onload:function(a){this.cfg.events.load=a},onerror:function(a){this.cfg.events.error=a},overrideGetData:function(a){this._.handle.getData=a},setUrl:function(a){this.elems.__submit_form.action=a},_deleteForm:function(){try{this.elems.__submit_form&&this.elems.__submit_form.parentNode.removeChild(this.elems.__submit_form)}catch(a){}delete this.elems.__submit_form},
_deleteIO:function(){try{this.elems.io&&(this.__removeOnloadEvent(),this.elems.io.parentNode.removeChild(this.elems.io))}catch(a){}delete this.elems.doc;delete this.elems.win;delete this.elems.io},dispose:function(){this._deleteForm();this._deleteIO()},__removeOnloadEvent:function(){this.elems.io&&(this.elems.io.detachEvent?this.elems.io.detachEvent("onload",this._.handle.load):this.elems.io.onload=e)}};g.IO_Iframe=c}.call(this,window,document);
void function(a,d,g){a=FOCUS.namespace("FOCUS.widget.io.iframe");var e=a.IO_FormData,h=a.IO_Iframe,c=function(){};d=function(a){this.cfg={events:{error:c,load:c,progress:c,abort:c},progressURL:"",charset:"UTF-8",timeout:1E5};this._={cancel:!1,timeout:!1,loaded:!1,timeoutTimer:-1};this.elems={};this.set(a);this.init()};d.prototype={init:function(){var a=this;this._.getProgress=function(){var c=arguments.callee;if(a.cfg.progressURL&&!a._.loaded){a.elems.io_progress=new h;a.elems.io_progress.onload(function(d){setTimeout(function(){a.elems.io_progress.dispose()},
25);a._.loaded||(d=FOCUS.util.JSON.parse(d),a.cfg.events.progress.call(d),setTimeout(function(){c()},100))});a.elems.io_progress.open("GET",a.cfg.progressURL,!0);var d=new e;d.append("progress","loaded");a.elems.io_progress.send(d)}}},send:function(a){var c=this;this._.timeoutTimer=setTimeout(function(){c.timeout()},this.cfg.timeout);this.elems.io.send(a,this.cfg.charset);setTimeout(function(){c._.cancel||c.cfg.events.progress.call(c,{loaded:0,total:100})},1);this._.getProgress()},open:function(a,
c){this._.fullProgress=!1;this.reset();this.elems.io.open(a,c)},set:function(a){FOCUS.util.extend(!0,this.cfg,a)},reset:function(){var a=this;this.elems.io&&this.elems.io.dispose();this.elems.io_progress&&this.elems.io_progress.dispose();this.elems.io=new h({timeout:this.cfg.timeout});this.elems.io.onload(function(c){a._.timeout||(a._.fullProgress||(a.cfg.events.progress.call(a,{loaded:100,total:100}),a._.fullProgress=!0),clearTimeout(a._.timeoutTimer),a._.cancel||(a._.loaded=!0,a.cfg.events.load.call(a,
c,this)))});this.elems.io.onerror(function(c){clearTimeout(a._.timeoutTimer);a._.cancel||a.cfg.events.error.call(a,this,c)});this._.cancel=!1;this._.timeout=!1;this._.loaded=!1;this._.timeoutTimer=-1},dispose:function(){this.elems.io&&(this.elems.io.dispose(),delete this.elems.io);this.elems.io_progress&&(this.elems.io_progress.dispose(),delete this.elems.io_progress)},timeout:function(){this._.timeout=!0;this.elems.io.__removeOnloadEvent();this.cfg.events.error.call(this,this,"timeout")},abort:function(){this._.cancel=
!0;clearTimeout(this._.timeoutTimer);this.elems.io&&this.elems.io.__removeOnloadEvent();this.cfg.events.abort()}};a.Poster=d}.call(this,window,document);
void function(a,d,g){var e=FOCUS.util.createElement,h=FOCUS.widget.io.iframe.Poster,c=FOCUS.widget.io.iframe.IO_FormData,b=function(){};FOCUS.widget.Upload_Iframe=function(a){this.constructor=arguments.callee;this.mode=FOCUS.widget.Upload.MODE.IFRAME;this.elems={};this.cfg={events:{ready:b,loadFailed:b,dialogStart:b,dialogComplete:b,queued:b,queueError:b,uploadStart:b,uploadProgress:b,uploadSuccess:b,uploadError:b,uploadComplete:b},button:{text:"Upload"},multiple:!0,sizeLimit:-1,queueLimit:-1,fileTypes:FOCUS.widget.Upload.MIME_TYPE.ALL,
fileTypesDescription:"All Files",uploadURL:"",filePostName:"",placeholder:"",charset:FOCUS.widget.Upload.CHARSET.DEFAULT,debug:!1,timeout:1E5};this._={queue:[],uploadingFile:null,uploadedFile:[],status:FOCUS.widget.Upload.TURNING.ON};this.set(a);this.init()};FOCUS.widget.Upload_Iframe.prototype=new FOCUS.widget.UploadBase;FOCUS.util.extend(!0,FOCUS.widget.Upload_Iframe.prototype,{init:function(){var b=this;this.elems.holder=e({el:"div"});this.elems.holder.style.cssText="";var g={missing_url:[FOCUS.widget.Upload.UPLOAD_ERROR.MISSING_UPLOAD_URL,
"missing upload URL."],invalid_filetype:[FOCUS.widget.Upload.QUEUE_ERROR.INVALID_FILETYPE,"File is not an allowed file type."],size_limit:[FOCUS.widget.Upload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT,"File size exceeds allowed limit."],chain_error:[FOCUS.widget.Upload.QUEUE_ERROR.CHAIN_ERROR,"Some reason to occured chain error."]};FOCUS.util.extend(this._,{post:function(a){var d=new c;if("object"===FOCUS.util.type(b.cfg.postParams))for(var e in b.cfg.postParams)d.append(e,b.cfg.postParams[e]);d.append(b.cfg.filePostName||
a.id,a.data);b.elems.poster.open("POST",b.cfg.uploadURL,!0);b.elems.poster.send(d)},start:function(a){if(a=b.getQueueFile())!b.cfg.uploadURL||"string"!==FOCUS.util.type(b.cfg.uploadURL)?(b.cfg.events.uploadError.apply(b,[a].concat(g.missing_url)),b.stopUpload()):(a.status=FOCUS.widget.Upload.FILE_STATUS.IN_PROGRESS,b._.uploadingFile=a,b.cfg.events.uploadStart.call(b,a),b._.post(a))},dialogStart:function(c){c=c||a.event;c.stopPropagation?c.stopPropagation():c.cancelBubble=!0;b.cfg.events.dialogStart.call(b)},
__queued:function(a,c){var d=[],e=[],h=b._.queue,k=new FOCUS.widget.Upload.File(this);if(this.files&&(!FOCUS.util.browser.firefox||FOCUS.util.browser.firefox&&3.6<=FOCUS.util.browser.version)){var u=[],D=!1,q;if(-1!==b.cfg.queueLimit&&this.files.length+b._.queue.length>b.cfg.queueLimit){for(var r=0,v=this.files.length;r<v;r++)q=new FOCUS.widget.Upload.File(this.files[r]),d.push(q),b.cfg.events.queueError.call(b,q,FOCUS.widget.Upload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED,b.cfg.queueLimit);D=!0}else for(var H=
FOCUS.util.sizeConvert.unit2Bytes(b.cfg.sizeLimit),r=0,v=this.files.length;r<v;r++){q=new FOCUS.widget.Upload.File(this.files[r]);d.push(q);var s;if(FOCUS.util.mimeValidation(b.cfg.fileTypes,q.type)){if(-1!==b.cfg.sizeLimit&&(q.fileSize||q.size)>H)s=g.size_limit}else s=g.invalid_filetype;s?(b.cfg.events.queueError.apply(b,[q].concat(s)),D=!0):u.push(q)}if(D){r=0;for(v=u.length;r<v;r++)u[r].id=k.id,b.cfg.events.queueError.apply(b,[u[r]].concat(g.chain_error))}else{r=0;for(v=u.length;r<v;r++)u[r].status=
FOCUS.widget.Upload.FILE_STATUS.QUEUED,u[r].id=k.id,b.cfg.events.queued.call(b,u[r]);e=e.concat(u);h.push(k)}delete u}else d.push(k),FOCUS.util.mimeValidation(b.cfg.fileTypes,k.type)?(e.push(k),h.push(k),k.status=FOCUS.widget.Upload.FILE_STATUS.QUEUED,b.cfg.events.queued.call(b,k)):b.cfg.events.queueError.apply(b,[k].concat(g.invalid_filetype));a&&(b.elems.selector.parentNode.removeChild(b.elems.selector),b.elems.selector=b._._crateSelector(b.elems.holder,b._.dialogStart,b._.dialogComplete));"function"===
FOCUS.util.type(c)&&c.call(b,d.length,e.length,h.length);delete d;delete e;delete h},dialogComplete:function(c){c=c||a.event;c.stopPropagation?c.stopPropagation():c.cancelBubble=!0;b._.__queued.call(this,!0,b.cfg.events.dialogComplete)},uploadProgress:function(a){var c=b.getQueueFile();c.status=FOCUS.widget.Upload.FILE_STATUS.IN_PROGRESS;a.loaded===a.total&&(c.fullProgress=!0);b.cfg.events.uploadProgress.call(b,c,a.loaded,a.total)},uploadSuccess:function(a,c){var d=b.elems.poster,e=b.getQueueFile();
b.cfg.events.uploadSuccess.call(b,e,a,d)},uploadError:function(a,c){c=(c||"").toUpperCase();var d=b.getQueueFile();d.status=FOCUS.widget.Upload.FILE_STATUS.ERROR;b.cfg.events.uploadError.call(b,d,FOCUS.widget.Upload.UPLOAD_ERROR[c?c:"UPLOAD_FAILED"],c?c:"TIMEOUT");b._.uploadComplete(!0)},uploadComplete:function(a,c){var d=b.getQueueFile();!a&&(!d.fullProgress&&!c)&&(b._.uploadProgress.call(b,{loaded:d.size,total:d.size}),d.fullProgress=!0);c||(d.status=FOCUS.widget.Upload.FILE_STATUS.COMPLETE);b._.queue.shift();
b._.uploadingFile=null;b.cfg.events.uploadComplete.call(b,d)},complete:function(a,c){b._.uploadSuccess.call(b,a,c);b._.uploadComplete.call(b);setTimeout(function(){b.elems.poster&&(b.elems.poster.dispose(),delete b.elems.poster)},25)},abort:function(){b._.uploadComplete(!1,!0)},_crateSelector:function(a,c,d){var g=e({el:"input",type:"file",name:"FOCUS_FILE_"+FOCUS.util.random(0,100),multiple:!!b.cfg.multiple});a.appendChild(g);FOCUS.util.event.bind(g,"click",c);FOCUS.util.event.bind(g,"change",d);
b.__setStyle("iframe",b.elems.holder,g,b.cfg.button.text);return g}});var h=FOCUS.query?FOCUS.query(this.cfg.placeholder):d.getElementById(this.cfg.placeholder.replace(/^#/,""));h&&("length"in h&&(h=h[0]),h&&(h.parentNode.insertBefore(this.elems.holder,h),b.elems.selector=this._._crateSelector(this.elems.holder,this._.dialogStart,this._.dialogComplete),h.parentNode.removeChild(h)))},startUpload:function(){this.elems.poster&&this.elems.poster.dispose();this.elems.poster=new h({events:{abort:this._.abort,
load:this._.complete,error:this._.uploadError,progress:this._.uploadProgress},progressURL:this.cfg.progressURL,charset:this.cfg.charset,timeout:this.cfg.timeout||1E5});this._.start()},queue:function(a,b){if(a){a.length===g&&(a=[a]);for(var c=0;c<a.length;c++)this._.__queued.call(a[c],!1,b)}}})}.call(this,this,this.document);var SWFUpload,swfobject;void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)});
SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings={},this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(a),this.loadSupport(),this.swfuploadPreload()&&this.loadFlash(),this.displayDebugInfo()}catch(d){throw delete SWFUpload.instances[this.movieName],d;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.5.0 2010-01-15 Beta 2";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290,RESIZE:-300};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.RESIZE_ENCODING={JPEG:-1,PNG:-2};
SWFUpload.completeURL=function(a){try{var d="",g=-1;if("string"!==typeof a||a.match(/^https?:\/\//i)||a.match(/^\//)||""===a)return a;g=window.location.pathname.lastIndexOf("/");d=0>=g?"/":window.location.pathname.substr(0,g)+"/";return d+a}catch(e){return a}};SWFUpload.onload=function(){};
SWFUpload.prototype.initSettings=function(a){this.ensureDefault=function(d,g){var e=a[d];this.settings[d]=void 0!=e?e:g};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",!1);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",!1);this.ensureDefault("requeue_on_error",!1);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description",
"All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("flash9_url","swfupload_fp9.swf");this.ensureDefault("prevent_swf_caching",!0);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",!1);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",!1);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_preload_handler",null);this.ensureDefault("swfupload_load_failed_handler",null);this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_resize_start_handler",null);this.ensureDefault("upload_start_handler",
null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("mouse_click_handler",null);this.ensureDefault("mouse_out_handler",null);this.ensureDefault("mouse_over_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;this.settings.prevent_swf_caching&&
(this.settings.flash_url=this.settings.flash_url+(0>this.settings.flash_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime(),this.settings.flash9_url=this.settings.flash9_url+(0>this.settings.flash9_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime());this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url));delete this.ensureDefault};
SWFUpload.prototype.loadSupport=function(){this.support={loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")}};
SWFUpload.prototype.loadFlash=function(){var a,d,g;if(this.support.loading)if(null!==document.getElementById(this.movieName))this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);else if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["button place holder not found"]);else{d="block"!==(a.currentStyle&&a.currentStyle.display||
window.getComputedStyle&&document.defaultView.getComputedStyle(a,null).getPropertyValue("display"))?"span":"div";d=document.createElement(d);g=this.getFlashHTML();try{d.innerHTML=g}catch(e){this.support.loading=!1;this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"]);return}g=d.getElementsByTagName("object");!g||1<g.length||0===g.length?(this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"])):
(1===g.length&&(this.movieElement=g[0]),a.parentNode.replaceChild(d.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement()))}else this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"])};
SWFUpload.prototype.getFlashHTML=function(a){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.support.imageResize?this.settings.flash_url:this.settings.flash9_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.support.imageResize?this.settings.flash_url:this.settings.flash9_url,'" /><param name="quality" value="high" /><param name="allowScriptAccess" value="always" />',
'<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};
SWFUpload.prototype.getFlashVars=function(){var a,d;d=this.buildParamString();a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),
"&amp;params=",encodeURIComponent(d),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName));if(null===this.movieElement)throw"Could not find Flash element";return this.movieElement};
SWFUpload.prototype.buildParamString=function(){var a,d,g=[];d=this.settings.post_params;if("object"===typeof d)for(a in d)d.hasOwnProperty(a)&&g.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(d[a].toString()));return g.join("&amp;")};
SWFUpload.prototype.destroy=function(){var a;try{this.cancelUpload(null,!1);if(a=this.cleanUp())try{a.parentNode.removeChild(a)}catch(d){}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(g){return!1}};
SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tflash9_url:                ",this.settings.flash9_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",
this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",
this.settings.file_queue_limit,"\n\tdebug:                    ",this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",
this.settings.button_height.toString(),"\n\tbutton_text:              ",this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_cursor:            ",this.settings.button_cursor.toString(),"\n\tbutton_disabled:          ",
this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_preload_handler assigned:  ",("function"===typeof this.settings.swfupload_preload_handler).toString(),"\n\tswfupload_load_failed_handler assigned:  ",("function"===typeof this.settings.swfupload_load_failed_handler).toString(),"\n\tswfupload_loaded_handler assigned:  ",("function"===typeof this.settings.swfupload_loaded_handler).toString(),"\n\tmouse_click_handler assigned:       ",
("function"===typeof this.settings.mouse_click_handler).toString(),"\n\tmouse_over_handler assigned:        ",("function"===typeof this.settings.mouse_over_handler).toString(),"\n\tmouse_out_handler assigned:         ",("function"===typeof this.settings.mouse_out_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",("function"===typeof this.settings.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof this.settings.file_queued_handler).toString(),
"\n\tfile_queue_error_handler assigned:  ",("function"===typeof this.settings.file_queue_error_handler).toString(),"\n\tupload_resize_start_handler assigned:      ",("function"===typeof this.settings.upload_resize_start_handler).toString(),"\n\tupload_start_handler assigned:      ",("function"===typeof this.settings.upload_start_handler).toString(),"\n\tupload_progress_handler assigned:   ",("function"===typeof this.settings.upload_progress_handler).toString(),"\n\tupload_error_handler assigned:      ",
("function"===typeof this.settings.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof this.settings.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof this.settings.upload_complete_handler).toString(),"\n\tdebug_handler assigned:             ",("function"===typeof this.settings.debug_handler).toString(),"\nSupport:\n\tLoad:                     ",this.support.loading?"Yes":"No","\n\tImage Resize:             ",
this.support.imageResize?"Yes":"No","\n"].join(""))};SWFUpload.prototype.addSetting=function(a,d,g){return void 0==d?this.settings[a]=g:this.settings[a]=d};SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""};
SWFUpload.prototype.callFlash=function(a,d){var g,e,h;d=d||[];g=this.getMovieElement();try{void 0!=g?(h=g.CallFunction('<invoke name="'+a+'" returntype="javascript">'+__flash__argumentsToXML(d,0)+"</invoke>"),e=eval(h)):this.debug("Can't call flash because the movie wasn't found.")}catch(c){this.debug("Exception calling flash function '"+a+"': "+c.message)}void 0!=e&&"object"===typeof e.post&&(e=this.unescapeFilePostParams(e));return e};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};
SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.startResizedUpload=function(a,d,g,e,h,c){this.callFlash("StartUpload",[a,{width:d,height:g,encoding:e,quality:h,allowEnlarging:c}])};SWFUpload.prototype.cancelUpload=function(a,d){!1!==d&&(d=!0);this.callFlash("CancelUpload",[a,d])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};
SWFUpload.prototype.requeueUpload=function(a){return this.callFlash("RequeueUpload",[a])};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])};
SWFUpload.prototype.getQueueFile=function(a){return"number"===typeof a?this.callFlash("GetFileByQueueIndex",[a]):this.callFlash("GetFile",[a])};SWFUpload.prototype.addFileParam=function(a,d,g){return this.callFlash("AddFileParam",[a,d,g])};SWFUpload.prototype.removeFileParam=function(a,d){this.callFlash("RemoveFileParam",[a,d])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};
SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,d){this.settings.post_params[a]=d;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};
SWFUpload.prototype.setFileTypes=function(a,d){this.settings.file_types=a;this.settings.file_types_description=d;this.callFlash("SetFileTypes",[a,d])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};
SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};
SWFUpload.prototype.setHTTPSuccess=function(a){"string"===typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};
SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,d){this.settings.button_width=a;this.settings.button_height=d;var g=this.getMovieElement();void 0!=g&&(g.style.width=a+"px",g.style.height=d+"px");this.callFlash("SetButtonDimensions",[a,d])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};
SWFUpload.prototype.setButtonTextPadding=function(a,d){this.settings.button_text_top_padding=d;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,d])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};
SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};
SWFUpload.prototype.queueEvent=function(a,d){var g=this;void 0==d?d=[]:d instanceof Array||(d=[d]);if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,d)}),setTimeout(function(){g.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function";};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"===typeof a&&a.apply(this)};
SWFUpload.prototype.unescapeFilePostParams=function(a){var d=/[$]([0-9a-f]{4})/i,g={},e,h,c;if(void 0!=a){for(h in a.post)if(a.post.hasOwnProperty(h)){for(e=h;null!==(c=d.exec(e));)e=e.replace(c[0],String.fromCharCode(parseInt("0x"+c[1],16)));g[e]=a.post[h]}a.post=g}return a};
SWFUpload.prototype.swfuploadPreload=function(){var a;if("function"===typeof this.settings.swfupload_preload_handler)a=this.settings.swfupload_preload_handler.call(this);else if(void 0!=this.settings.swfupload_preload_handler)throw"upload_start_handler must be a function";void 0===a&&(a=!0);return!!a};SWFUpload.prototype.flashReady=function(){this.cleanUp()?this.queueEvent("swfupload_loaded_handler"):this.debug("Flash called back ready but the flash movie can't be found.")};
SWFUpload.prototype.cleanUp=function(){var a,d=this.getMovieElement();try{if(d&&"unknown"===typeof d.CallFunction)for(a in this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)"),d)try{"function"===typeof d[a]&&(d[a]=null)}catch(g){}}catch(e){}window.__flash__removeCallback=function(a,c){try{a&&(a[c]=null)}catch(b){}};return d};SWFUpload.prototype.mouseClick=function(){this.queueEvent("mouse_click_handler")};SWFUpload.prototype.mouseOver=function(){this.queueEvent("mouse_over_handler")};
SWFUpload.prototype.mouseOut=function(){this.queueEvent("mouse_out_handler")};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,d,g){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,d,g])};
SWFUpload.prototype.fileDialogComplete=function(a,d,g){this.queueEvent("file_dialog_complete_handler",[a,d,g])};SWFUpload.prototype.uploadResizeStart=function(a,d){a=this.unescapeFilePostParams(a);this.queueEvent("upload_resize_start_handler",[a,d.width,d.height,d.encoding,d.quality])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};
SWFUpload.prototype.returnUploadStart=function(a){var d;if("function"===typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),d=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===d&&(d=!0);this.callFlash("ReturnUploadStart",[!!d])};SWFUpload.prototype.uploadProgress=function(a,d,g){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,d,g])};
SWFUpload.prototype.uploadError=function(a,d,g){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,d,g])};SWFUpload.prototype.uploadSuccess=function(a,d,g){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,d,g])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};
SWFUpload.prototype.debugMessage=function(a){var d,g;if(this.settings.debug){d=[];if("object"===typeof a&&"string"===typeof a.name&&"string"===typeof a.message){for(g in a)a.hasOwnProperty(g)&&d.push(g+": "+a[g]);a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ")}SWFUpload.Console.writeLine(a)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(a){var d,g;try{d=document.getElementById("SWFUpload_Console"),d||(g=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(g),d=document.createElement("textarea"),d.id="SWFUpload_Console",d.style.fontFamily="monospace",d.setAttribute("wrap","off"),d.wrap="off",d.style.overflow="auto",d.style.width="700px",d.style.height="350px",d.style.margin="5px",g.appendChild(d)),d.value+=a+"\n",d.scrollTop=d.scrollHeight-d.clientHeight}catch(e){alert("Exception: "+
e.name+" Message: "+e.message)}};
swfobject=function(){function a(){if(!B){try{var a=m.getElementsByTagName("body")[0].appendChild(m.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}B=!0;for(var a=I.length,c=0;c<a;c++)I[c]()}}function d(a){B?a():I[I.length]=a}function g(a){if(typeof s.addEventListener!=q)s.addEventListener("load",a,!1);else if(typeof m.addEventListener!=q)m.addEventListener("load",a,!1);else if(typeof s.attachEvent!=q)C(s,"onload",a);else if("function"==typeof s.onload){var b=s.onload;s.onload=function(){b();
a()}}else s.onload=a}function e(){var a=m.getElementsByTagName("body")[0],b=m.createElement(r);b.setAttribute("type",v);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=q){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),l.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;h()})()}else h()}function h(){var a=z.length;if(0<a)for(var d=0;d<a;d++){var e=z[d].id,g=z[d].callbackFn,
h={success:!1,id:e};if(0<l.pv[0]){var k=t(e);if(k)if(x(z[d].swfVersion)&&!(l.wk&&312>l.wk))u(e,!0),g&&(h.success=!0,h.ref=c(e),g(h));else if(z[d].expressInstall&&b()){h={};h.data=z[d].expressInstall;h.width=k.getAttribute("width")||"0";h.height=k.getAttribute("height")||"0";k.getAttribute("class")&&(h.styleclass=k.getAttribute("class"));k.getAttribute("align")&&(h.align=k.getAttribute("align"));for(var n={},k=k.getElementsByTagName("param"),m=k.length,p=0;p<m;p++)"movie"!=k[p].getAttribute("name").toLowerCase()&&
(n[k[p].getAttribute("name")]=k[p].getAttribute("value"));f(h,n,e,g)}else y(k),g&&g(h)}else if(u(e,!0),g){if((e=c(e))&&typeof e.SetVariable!=q)h.success=!0,h.ref=e;g(h)}}}function c(a){var b=null;if((a=t(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=q?b=a:(a=a.getElementsByTagName(r)[0])&&(b=a);return b}function b(){return!J&&x("6.0.65")&&(l.win||l.mac)&&!(l.wk&&312>l.wk)}function f(a,b,c,d){J=!0;M=d||null;O={success:!1,id:c};var e=t(c);if(e){"OBJECT"==e.nodeName?(G=k(e),K=null):(G=e,K=c);a.id=
H;if(typeof a.width==q||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==q||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";m.title=m.title.slice(0,47)+" - Flash Player Installation";d=l.ie&&l.win?"ActiveX":"PlugIn";d="MMredirectURL="+s.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+m.title;b.flashvars=typeof b.flashvars!=q?b.flashvars+("&"+d):d;l.ie&&(l.win&&4!=e.readyState)&&(d=m.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",
c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());n(a,b,c)}}function y(a){if(l.ie&&l.win&&4!=a.readyState){var b=m.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(k(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=m.createElement("div");if(l.win&&
l.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(r)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(1==a[d].nodeType&&"PARAM"==a[d].nodeName)&&8!=a[d].nodeType&&b.appendChild(a[d].cloneNode(!0));return b}function n(a,b,c){var d,e=t(c);if(l.wk&&312>l.wk)return d;if(e)if(typeof a.id==q&&(a.id=c),l.ie&&l.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+
g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";L[L.length]=a.id;d=t(a.id)}else{h=m.createElement(r);h.setAttribute("type",v);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&
(a=h,g=f,k=b[f],c=m.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function p(a){var b=t(a);b&&"OBJECT"==b.nodeName&&(l.ie&&l.win?(b.style.display="none",function(){if(4==b.readyState){var c=t(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function t(a){var b=null;try{b=m.getElementById(a)}catch(c){}return b}
function C(a,b,c){a.attachEvent(b,c);E[E.length]=[a,b,c]}function x(a){var b=l.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function F(a,b,c,d){if(!l.ie||!l.mac){var e=m.getElementsByTagName("head")[0];if(e){c=c&&"string"==typeof c?c:"screen";d&&(N=w=null);if(!w||N!=c)d=m.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),w=e.appendChild(d),
l.ie&&(l.win&&typeof m.styleSheets!=q&&0<m.styleSheets.length)&&(w=m.styleSheets[m.styleSheets.length-1]),N=c;l.ie&&l.win?w&&typeof w.addRule==r&&w.addRule(a,b):w&&typeof m.createTextNode!=q&&w.appendChild(m.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(P){var c=b?"visible":"hidden";B&&t(a)?t(a).style.visibility=c:F("#"+a,"visibility:"+c)}}function D(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=q?encodeURIComponent(a):a}var q="undefined",r="object",v="application/x-shockwave-flash",
H="SWFObjectExprInst",s=window,m=document,A=navigator,Q=!1,I=[function(){Q?e():h()}],z=[],L=[],E=[],G,K,M,O,B=!1,J=!1,w,N,P=!0,l=function(){var a=typeof m.getElementById!=q&&typeof m.getElementsByTagName!=q&&typeof m.createElement!=q,b=A.userAgent.toLowerCase(),c=A.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if(typeof A.plugins!=q&&typeof A.plugins["Shockwave Flash"]==
r){if((g=A.plugins["Shockwave Flash"].description)&&!(typeof A.mimeTypes!=q&&A.mimeTypes[v]&&!A.mimeTypes[v].enabledPlugin))Q=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof s.ActiveXObject!=q)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(g=h.GetVariable("$version")))e=!0,g=g.split(" ")[1].split(","),
f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(k){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){l.w3&&((typeof m.readyState!=q&&"complete"==m.readyState||typeof m.readyState==q&&(m.getElementsByTagName("body")[0]||m.body))&&a(),B||(typeof m.addEventListener!=q&&m.addEventListener("DOMContentLoaded",a,!1),l.ie&&l.win&&(m.attachEvent("onreadystatechange",function(){"complete"==m.readyState&&(m.detachEvent("onreadystatechange",arguments.callee),a())}),s==top&&function(){if(!B){try{m.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}a()}}()),l.wk&&function(){B||(/loaded|complete/.test(m.readyState)?a():setTimeout(arguments.callee,0))}(),g(a)))})();(function(){l.ie&&l.win&&window.attachEvent("onunload",function(){for(var a=E.length,b=0;b<a;b++)E[b][0].detachEvent(E[b][1],E[b][2]);a=L.length;for(b=0;b<a;b++)p(L[b]);for(var c in l)l[c]=null;l=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(l.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;z[z.length]=e;u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(l.w3)return c(a)},embedSWF:function(a,c,e,g,h,k,m,p,s,t){var v={success:!1,id:c};l.w3&&!(l.wk&&312>l.wk)&&a&&c&&e&&g&&h?(u(c,!1),d(function(){e+="";g+="";var d={};if(s&&typeof s===r)for(var l in s)d[l]=s[l];d.data=a;d.width=e;d.height=g;l={};if(p&&typeof p===r)for(var y in p)l[y]=p[y];if(m&&typeof m===r)for(var w in m)l.flashvars=typeof l.flashvars!=q?l.flashvars+("&"+w+"="+m[w]):w+"="+m[w];if(x(h))y=n(d,l,c),d.id==
c&&u(c,!0),v.success=!0,v.ref=y;else{if(k&&b()){d.data=k;f(d,l,c,t);return}u(c,!0)}t&&t(v)})):t&&t(v)},switchOffAutoHideShow:function(){P=!1},ua:l,getFlashPlayerVersion:function(){return{major:l.pv[0],minor:l.pv[1],release:l.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(a,b,c){if(l.w3)return n(a,b,c)},showExpressInstall:function(a,c,d,e){l.w3&&b()&&f(a,c,d,e)},removeSWF:function(a){l.w3&&p(a)},createCSS:function(a,b,c,d){l.w3&&F(a,b,c,d)},addDomLoadEvent:d,addLoadEvent:g,getQueryParamValue:function(a){var b=
m.location.search||m.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return D(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return D(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(J){var a=t(H);a&&G&&(a.parentNode.replaceChild(G,a),K&&(u(K,!0),l.ie&&l.win&&(G.style.display="block")),M&&M(O));J=!1}}}}();swfobject.addDomLoadEvent(function(){"function"===typeof SWFUpload.onload&&SWFUpload.onload.call(window)});
void function(a,d,g){FOCUS.namespace("FOCUS.widget");var e={flash_url:"flashURL",flash9_url:"flash9URL",upload_url:"uploadURL",file_post_name:"filePostName",post_params:"postParams",file_types:"fileTypes",file_types_description:"fileTypesDescription",file_upload_limit:"uploadLimit",file_size_limit:"sizeLimit",file_queue_limit:"queueLimit",button_placeholder_id:"placeholder",swfupload_loaded_handler:"events.ready",swfupload_load_failed_handler:"events.fail",file_dialog_start_handler:"events.dialogStart",
file_queued_handler:"events.queued",file_queue_error_handler:"events.queueError",file_dialog_complete_handler:"events.dialogComplete",upload_start_handler:"events.uploadStart",upload_progress_handler:"events.uploadProgress",upload_error_handler:"events.uploadError",upload_success_handler:"events.uploadSuccess",upload_complete_handler:"events.uploadComplete",debug:"debug",button_width:"button.width",button_height:"button.height",button_text:"button.text"},h=function(a){a=(a||"").split(/\./);for(var b=
this,d=!1,e;e=a.shift();)if(e in b)d=!0,b=b[e];else{d=!1;break}return{has:d,value:d?b:null}};FOCUS.widget.Upload_Flash=function(a){this.constructor=arguments.callee;this.mode=FOCUS.widget.Upload.MODE.FLASH;this.cfg={};this.elems={};this._={flash_cfg:{flash_url:FOCUS.BASEPATH+"widget/upload/flash/swfupload.swf",flash9_url:FOCUS.BASEPATH+"wigdet/upload/flash/swfupload_fp9.swf",debug:!1,file_upload_limit:-1,button_width:650,button_height:200,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT},
status:FOCUS.widget.Upload.TURNING.ON};this.set(a);this.init();this.instance=new SWFUpload(this._.flash_cfg)};FOCUS.widget.Upload_Flash.prototype=new FOCUS.widget.UploadBase;FOCUS.util.extend(!0,FOCUS.widget.Upload_Flash.prototype,{init:function(){this.elems.holder=d.createElement("div");this.elems.flashWrap=d.createElement("div");this.elems.flashHolder=d.createElement("span");var a=this.elems.flashHolder.id="FOCUS_UPLOAD_FlashHolder_"+FOCUS.util.random(0,1E3),b=FOCUS.query?FOCUS.query(this._.flash_cfg.button_placeholder_id):
d.getElementById(this._.flash_cfg.button_placeholder_id);"length"in b&&(b=b[0]);b&&(b.parentNode.insertBefore(this.elems.holder,b),this.elems.holder.appendChild(this.elems.flashWrap),this.elems.flashWrap.appendChild(this.elems.flashHolder));this.__setStyle("flash",this.elems.holder,this.elems.flashWrap,this._.flash_cfg.button_text);this._.flash_cfg.button_placeholder_id=a;this._.flash_cfg.button_text=""},set:function(a){FOCUS.util.extend(!0,this.cfg,a);this.__setFlashCfg(this.cfg)},__setFlashCfg:function(a){var b,
d;for(d in e)b=h.call(a,e[d]),b.has&&(this._.flash_cfg[d]=b.value);this._.flash_cfg.button_action=SWFUpload.BUTTON_ACTION[a.multiple?"SELECT_FILES":"SELECT_FILE"];this.instance&&(this.multiple(this.cfg.multiple),this.setFileTypes(this.cfg.fileTypes),this.setFileSizeLimit(this.cfg.sizeLimit),this.setUploadURL(this.cfg.uploadURL),this.setFilePostName(this.cfg.filePostName),this.setFileQueueLimit(this.cfg.queueLimit))},__setStyle:function(a,b,e,g){var h=FOCUS.util,n=FOCUS.widget.Upload.CSS;b.className=
n.WRAP;e.className=n.FLASH;a=b.getElementsByTagName("label");a.length&&b.removeChild(a[0]);a=d.createElement("label");a.className=n.TEXT;a.innerHTML=g;b.insertBefore(a,e);h.event.bind(b,"mouseover",function(a){a.cancelBubble=!0;a.returnValue=!1;h.addClass(b,n.HOVER)});FOCUS.util.event.bind(b,"mouseout",function(a){a.cancelBubble=!0;a.returnValue=!1;h.removeClass(b,n.HOVER)})},startUpload:function(){return this.instance.startUpload()},cancelUpload:function(a){if("function"===FOCUS.util.type(a))this.one("uploadError",
a);this.instance.cancelUpload(0,!0)},stopUpload:function(a){if("function"===FOCUS.util.type(a))this.one("uploadError",a);this.instance.stopUpload()},getQueueFile:function(a){return new FOCUS.widget.Upload.File(this.instance.getQueueFile(a))},setPostParam:function(a){return this.instance.setPostParam(a)},addPostParam:function(a,b){return this.instance.addPostParam(a,b)},removePostParam:function(a){return this.instance.removePostParam(a)},setUploadURL:function(a){this.cfg.uploadURL=a;return this.instance.setUploadURL(a)},
setFilePostName:function(a){return this.instance.setFilePostName(a)},setFileTypes:function(a,b){this.cfg.fileTypes=FOCUS.util.convert2MimeTypes(a);this.instance.setFileTypes(FOCUS.util.convertMimeTypes(a),b)},setFileSizeLimit:function(a){this.cfg.sizeLimit=limt;this.instance.setFileSizeLimit(a)},setFileQueueLimit:function(a){this.cfg.queueLimit=a;this.instance.setFileQueueLimit(a)},__translateStatus:function(a){var b=FOCUS.util.type(a);"string"===b?(a=FOCUS.util.trim(a),a=a.length?!!FOCUS.widget.Upload.TURNING[a.toUpperCase()]:
FOCUS.widget.Upload.TURNING.OFF):a="undefined"===b?!_this._.status:!!a;return a},turn:function(a){a=this.__translateStatus(a);var b=FOCUS.util,d=FOCUS.widget.Upload.CSS,e=FOCUS.widget.Upload.CURSOR;this._.status=a;b[a?"removeClass":"addClass"](this.elems.holder,d.DISABLED);this.ready(function(){this.instance.setButtonDisabled(!a);this.instance.setButtonCursor(e[a?"POINTER":"DEFAULT"])})},multiple:function(a){this.instance.setButtonAction(SWFUpload.BUTTON_ACTION[a?"SELECT_FILES":"SELECT_FILE"])}})}.call(this,
this,document);
