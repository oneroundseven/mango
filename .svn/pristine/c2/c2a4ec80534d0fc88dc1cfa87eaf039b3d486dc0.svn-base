/* Pub Time: September 9, 2013 17:01:03 */(function(h){function r(a){a.innerHTML=""}function m(a){a.innerHTML=""===this.elems.carrier.value?this._.placeholder:""}function f(a,d){return a.currentStyle?a.currentStyle[d]:h.getComputedStyle(a,null)[d]}function q(a,d,b){"undefined"==typeof b&&(b=!0);for(var c in d)if("Object"===Object.prototype.toString.call(d[c]))arguments.callee(a,d[c]);else if(!a[c]||b)a[c]=d[c];return a}var s=new Abstract({setPlaceholer:function(){},show:function(){},hide:function(){},initPage:function(){},onchange:function(){}}),
i=new Clazz(s,{config:{carrier:null,control:{unifieddisplay:!1,emMethod:"focus"},style:{color:"#BBB",fontFamily:""}},inherit:Component},function(a){this.setConfig(a);this._.support="placeholder"in document.createElement("input");this._.placeholder=null;this.setPlaceholer.implement(this._setPlaceholder);this.show.implement(this._show);this.hide.implement(this._hide);this.onchange.implement(this._onchange);return this.initialize()});i.extend({initialize:function(){var a=this.config;if(!a.carrier)throw Error("Placeholder not support with carrier null!");
if("[object Array]"==Object.prototype.toString.call(a.carrier)){var d=[],b,c,e;b=0;for(c=a.carrier.length;b<c;b++)(e=a.carrier[b])&&1===e.nodeType&&d.push(new i(q({carrier:e},a,!1)));return d}if(!a.carrier.placeholder||!a.carrier.getAttributeNode("placeholder").nodeValue)throw Error("Element not has placeholder!");a=this.config;this.elems.carrier=a.carrier;this._.placeholder=a.carrier.placeholder||a.carrier.getAttributeNode("placeholder").nodeValue;this._.name=a.carrier.name||"";a.control.unifieddisplay&&
(a.carrier.removeAttribute("placeholder"),this._.support=!1);if(!this._.support){a.carrier.id||(a.carrier.id="p_"+(new Date).getTime());this._.id=a.carrier.id;d=this.elems;b=a.carrier;var h,n,o,j,g,p=document.createElement("label");p.htmlFor=this._.id;c=f(b,"padding");e=f(b,"margin");h=f(b,"fontSize");g=f(b,"paddingLeft");n=f(b,"borderTopWidth");o=f(b,"borderLeftWidth");j=f(b,"marginTop");e||(e=getComputedStyle(b,null).marginTop+" 0");c||(c=f(b,"paddingTop")+" "+f(b,"paddingRight")+" "+f(b,"paddingBottom")+
" "+f(b,"paddingLeft"));0!==parseInt(n)&&(j=parseInt("auto"===j?1:j)+parseInt(n)+"px");0!==parseInt(o)&&(g="auto"===g?0:g,g=parseInt(o)+parseInt(g)+"px");p.style.cssText="position:absolute; color:"+this.config.style.color+"; cursor:text; padding:"+c+"; padding-left:"+g+"; margin:"+e+"; margin-top:"+j+"; font-size:"+h+"; font-family:"+this.config.style.fontFamily;d.label=p;""===a.carrier.value&&(this.elems.label.innerHTML=this._.placeholder);a.carrier.parentNode.insertBefore(this.elems.label,a.carrier);
var k=this,l=this.elems.label,a=this.elems.carrier;a.onblur=function(){m.call(k,l)};"input"===this.config.control.emMethod?(a.onpropertychange=function(){m.call(k,l)},a.oninput=function(){m.call(k,l)}):a.onfocus=function(){r.call(k,l)}}},_setPlaceholder:function(a){var d=a!=this._.placeholder;this._.placeholder=a;this.config.control.unifieddisplay||this.elems.carrier.setAttribute("placeholder",a);!this._.support&&""===this.elems.carrier.value&&(this.elems.label.innerHTML=a);d&&this.fire("change")},
_show:function(){this.elems.label&&(this.elems.label.style.display="");this.elems.carrier.style.display=""},_hide:function(){this.elems.label&&(this.elems.label.style.display="none");this.elems.carrier.style.display="none"},_onchange:function(a){if(a)this.on("change",a)}});i.initPage=function(a){var d=[],b,c,e;if(document.querySelectorAll){b=document.querySelectorAll("input[placeholder]");c=0;for(e=b.length;c<e;c++)d.push(b[c]);b=document.querySelectorAll("textarea[placeholder]");c=0;for(e=b.length;c<
e;c++)d.push(b[c])}else{b=document.getElementsByTagName("input");c=0;for(e=b.length;c<e;c++)b[c].placeholder&&d.push(b[c]);b=document.getElementsByTagName("textarea");c=0;for(e=b.length;c<e;c++)b[c].placeholder&&d.push(b[c])}if(d.length)return new i(q({carrier:d},a,!1))};h.Placeholder=i})(window);
